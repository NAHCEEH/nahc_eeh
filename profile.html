<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÎÇ¥ Í±¥Í∞ï Í¥ÄÎ¶¨</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #F2E9E0;
    min-height: 100vh;
    color: #5a4a3a;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 390px;
    margin: 0 auto;
    background: #F2E9E0;
    min-height: 100vh;
    position: relative;
}

/* Ìó§Îçî */
.header {
    background: transparent;
    padding: 20px;
    color: #5a4a3a;
    position: relative;
    text-align: center;
}

.back-btn {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #5a4a3a;
    font-size: 24px;
    cursor: pointer;
}

.header-title {
    font-size: 18px;
    font-weight: bold;
}

/* Î©îÏù∏ Ïª®ÌÖêÏ∏† */
.content {
    padding: 20px 0;
    padding-bottom: 100px;
}

/* ÏÑπÏÖò Ïä§ÌÉÄÏùº */
.section {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 25px;
    padding: 20px;
    margin: 0 20px 20px 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.section-title {
    font-size: 16px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* Ïò§Îäò ÎÇ†Ïßú Î∞è ÏÉÅÌÉú Ìó§Îçî Ïä§ÌÉÄÏùº */
.today-header {
    background: rgba(255, 255, 255, 0.4);
    border-radius: 15px;
    padding: 15px 20px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.today-date-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.today-date-text {
    font-size: 14px;
    font-weight: bold;
    color: #5a4a3a;
    letter-spacing: -0.3px;
}

.achievement-status {
    display: flex;
    align-items: center;
    gap: 6px;
}

.status-text {
    font-size: 11px;
    color: #EC9787;
    font-weight: 600;
}

.status-icon {
    font-size: 14px;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

/* Ìó§Îçî Îã¨Î†• ÌÜ†Í∏Ä Î≤ÑÌäº */
.header-calendar-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
    color: #5a4a3a;
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-calendar-toggle:hover {
    background: rgba(255, 255, 255, 0.7);
    transform: scale(1.1);
}

.header-calendar-toggle svg {
    width: 20px;
    height: 20px;
}

/* Í±¥Í∞ï ÏöîÏïΩ Ïπ¥ÎìúÎì§ Ïä§ÌÉÄÏùº */
.health-summary-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.summary-card {
    background: rgba(255, 255, 255, 0.6);
    border-radius: 15px;
    padding: 16px 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.summary-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #EC9787, #D4A574);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.summary-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.summary-card:hover::before {
    opacity: 1;
}

.card-icon {
    font-size: 24px;
    margin-bottom: 8px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.card-content {
    width: 100%;
}

.card-label {
    font-size: 11px;
    color: #666;
    margin-bottom: 4px;
    font-weight: 500;
}

.card-value {
    font-size: 16px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 2px;
    line-height: 1.2;
}

.card-target {
    font-size: 10px;
    color: #999;
    opacity: 0.8;
}

.card-status {
    font-size: 10px;
    color: #4CAF50;
    font-weight: 600;
    margin-top: 2px;
}

/* Í∏∞Ï°¥ ÏõîÍ∞Ñ Ï∫òÎ¶∞Îçî Ïä§ÌÉÄÏùº */
.calendar-container {
    background: rgba(255, 255, 255, 0.6);
    border-radius: 20px;
    padding: 25px;
    margin-bottom: 20px;
    animation: slideDown 0.3s ease;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.calendar-container.hidden {
    display: none;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.calendar-date {
    font-size: 20px;
    font-weight: bold;
    color: #5a4a3a;
    text-align: center;
}

.calendar-nav {
    display: flex;
    gap: 15px;
}

.nav-arrow {
    background: rgba(255, 255, 255, 0.8);
    border: none;
    color: #5a4a3a;
    font-size: 18px;
    cursor: pointer;
    padding: 8px 12px;
    border-radius: 50%;
    transition: all 0.3s ease;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.nav-arrow:hover {
    background: rgba(236, 151, 135, 0.2);
    transform: scale(1.1);
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin-bottom: 20px;
}

.calendar-day-header {
    text-align: center;
    font-size: 12px;
    color: #666;
    font-weight: bold;
    padding: 10px 0;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    color: #5a4a3a;
    font-weight: 500;
}

.calendar-day:hover {
    background: rgba(236, 151, 135, 0.2);
    transform: scale(1.05);
}

.calendar-day.today {
    background: #EC9787;
    color: white;
    font-weight: bold;
    box-shadow: 0 4px 12px rgba(236, 151, 135, 0.4);
}

.calendar-day.completed {
    background: #4CAF50;
    color: white;
    font-weight: bold;
}

.calendar-day.partial {
    background: #FF9800;
    color: white;
    font-weight: bold;
}

.calendar-day.missed {
    background: #f44336;
    color: white;
    font-weight: bold;
}

.calendar-day.other-month {
    color: #ccc;
    font-weight: normal;
}

/* Ï∫òÎ¶∞Îçî ÌïòÎã® Î≤îÎ°Ä Î∞è Î©îÎ™® */
.calendar-footer {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    padding-top: 20px;
    margin-top: 20px;
}

.calendar-legend {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.legend-dot.completed {
    background: #4CAF50;
}

.legend-dot.partial {
    background: #FF9800;
}

.legend-dot.missed {
    background: #f44336;
}

.legend-dot.period {
    background: #E91E63;
}

.legend-text {
    font-size: 12px;
    color: #666;
    font-weight: 500;
}

/* ÏÉùÎ¶¨ Í¥ÄÎ†® Ï∫òÎ¶∞Îçî ÌëúÏãú */
.calendar-day.period {
    position: relative;
}

.calendar-day.period::after {
    content: 'üå∏';
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 8px;
}

/* ÏÉùÎ¶¨ ÏòàÏ†ïÏùº ÏÑπÏÖò */
.period-info-section {
    background: rgba(233, 30, 99, 0.05);
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    border: 1px solid rgba(233, 30, 99, 0.1);
}

.period-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.period-icon {
    font-size: 24px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(233, 30, 99, 0.1);
    border-radius: 50%;
}

.period-details {
    flex: 1;
}

.period-title {
    font-size: 13px;
    color: #666;
    margin-bottom: 2px;
}

.period-date {
    font-size: 15px;
    font-weight: bold;
    color: #E91E63;
}

.period-settings-btn {
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.period-settings-btn:hover {
    background: rgba(233, 30, 99, 0.1);
    color: #E91E63;
}

.period-progress {
    margin-top: 10px;
}

.cycle-progress-bar {
    height: 4px;
    background: rgba(233, 30, 99, 0.1);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 8px;
}

.cycle-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #E91E63, #F06292);
    border-radius: 10px;
    transition: width 0.8s ease;
}

.cycle-info {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: #666;
}

/* ÏõîÎ≥Ñ Î†àÌè¨Ìä∏ Î≤ÑÌäº */
.monthly-report-btn {
    width: 100%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border: none;
    border-radius: 15px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 15px 0 10px 0;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    position: relative;
    overflow: hidden;
}

.monthly-report-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
}

.monthly-report-btn:hover::before {
    left: 100%;
}

.monthly-report-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
}

.report-icon {
    font-size: 24px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
}

.report-text {
    flex: 1;
    text-align: left;
    color: white;
}

.report-title {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 2px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.report-subtitle {
    font-size: 11px;
    opacity: 0.9;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.report-arrow {
    font-size: 16px;
    color: white;
    font-weight: bold;
    transition: transform 0.3s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.monthly-report-btn:hover .report-arrow {
    transform: translateX(3px);
}

.calendar-note {
    text-align: center;
    font-size: 12px;
    color: #999;
    line-height: 1.4;
}

/* Î™©ÌëúÎ≥Ñ Îã¨ÏÑ± ÌòÑÌô© ÏÑπÏÖò */
.goal-category-section {
    margin: 15px 0; /* 25pxÏóêÏÑú 15pxÎ°ú Í∞êÏÜå */
    padding: 15px 0; /* 20pxÏóêÏÑú 15pxÎ°ú Í∞êÏÜå */
    border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.category-toggle-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    padding: 8px 12px;
    border-radius: 12px;
    transition: all 0.3s ease;
    user-select: none;
}

.category-toggle-header:hover {
    background: rgba(236, 151, 135, 0.05);
}

.category-title {
    font-size: 14px;
    font-weight: bold;
    color: #5a4a3a;
    margin: 0;
}

.toggle-arrow {
    color: #5a4a3a;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
}

.toggle-arrow.expanded {
    transform: rotate(180deg);
}

.category-cards {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 12px; /* 15pxÏóêÏÑú 12pxÎ°ú Í∞êÏÜå */
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.category-cards.expanded {
    max-height: 300px;
    opacity: 1;
}

.category-card {
    background: rgba(255, 255, 255, 0.6);
    border-radius: 15px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(5px);
    transform: translateY(10px);
    animation: slideInCategory 0.3s ease forwards;
}

@keyframes slideInCategory {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.category-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.category-card.supplement {
    border-left: 4px solid #EC9787;
}

.category-card.exercise {
    border-left: 4px solid #4CAF50;
}

.category-card.other {
    border-left: 4px solid #2196F3;
}

.category-icon {
    font-size: 24px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.category-content {
    flex: 1;
}

.category-name {
    font-size: 14px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 8px;
}

.category-progress {
    display: flex;
    align-items: center;
    gap: 10px;
}

.progress-numbers {
    font-size: 13px;
    font-weight: bold;
    color: #666;
    min-width: 35px;
}

.mini-progress-bar {
    flex: 1;
    height: 6px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    overflow: hidden;
}

.mini-progress-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.mini-progress-fill.supplement-color {
    background: linear-gradient(90deg, #EC9787, #E58775);
}

.mini-progress-fill.exercise-color {
    background: linear-gradient(90deg, #4CAF50, #45a049);
}

.mini-progress-fill.other-color {
    background: linear-gradient(90deg, #2196F3, #1976D2);
}

.progress-percentage {
    font-size: 12px;
    font-weight: bold;
    color: #5a4a3a;
    min-width: 35px;
    text-align: right;
}
.achievement-container {
    animation: slideDown 0.3s ease;
}

.achievement-container.hidden {
    display: none;
}

.achievement-card {
    background: rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
}

.achievement-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.achievement-label {
    font-size: 14px;
    color: #5a4a3a;
}

.achievement-percentage {
    font-size: 20px;
    font-weight: bold;
    color: #5a4a3a;
}

.progress-container {
    position: relative;
    background: rgba(255, 255, 255, 0.5);
    height: 12px;
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progress-fill {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background: #EC9787;
    border-radius: 20px;
    transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
    margin-top: 8px;
}

.achievement-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 15px; /* 25pxÏóêÏÑú 15pxÎ°ú Í∞êÏÜå */
}

.stat-item {
    text-align: center;
    padding: 15px 10px;
    background: rgba(217, 188, 154, 0.3);
    border-radius: 15px;
    transition: transform 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-2px);
}

.stat-value {
    font-size: 18px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 3px;
}

.stat-label {
    font-size: 11px;
    color: #666;
}

/* Î™©Ìëú ÏÑπÏÖò */
.goal-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    margin-bottom: 10px;
    border: 1px solid rgba(236, 151, 135, 0.2);
    position: relative;
    transition: all 0.3s ease;
}

.goal-item:hover {
    transform: translateX(5px);
}

.goal-info {
    flex: 1;
}

.goal-title {
    font-weight: bold;
    margin-bottom: 5px;
}

.goal-progress {
    font-size: 12px;
    color: #666;
}

.goal-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.goal-status {
    width: 60px;
    text-align: center;
}

.progress-ring {
    width: 50px;
    height: 50px;
    position: relative;
}

.progress-ring svg {
    transform: rotate(-90deg);
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 12px;
    font-weight: bold;
}

.delete-btn {
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
    opacity: 0.7;
}

.delete-btn:hover {
    background: rgba(255, 107, 107, 0.1);
    opacity: 1;
    transform: scale(1.1);
}

.delete-btn svg {
    width: 20px;
    height: 20px;
}

.add-goal-btn {
    width: 100%;
    padding: 12px;
    background: rgba(217, 188, 154, 0.5);
    color: #5a4a3a;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px;
    transition: all 0.3s ease;
}

.add-goal-btn:hover {
    background: rgba(217, 188, 154, 0.7);
    transform: translateY(-2px);
}

/* ÏãùÎã® Í∏∞Î°ù ÏÑπÏÖò */
.meal-time-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.meal-tab {
    flex: 1;
    padding: 10px;
    background: #f5f5f5;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
}

.meal-tab.active {
    background: #EC9787;
    color: white;
}

.meal-record {
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 10px;
    border: 1px solid rgba(236, 151, 135, 0.2);
    position: relative;
    transition: all 0.3s ease;
}

.meal-record:hover {
    transform: translateX(5px);
}

.meal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.meal-title {
    font-weight: bold;
    color: #EC9787;
}

.meal-calories {
    font-size: 14px;
    color: #EC9787;
    font-weight: bold;
}

.meal-items {
    font-size: 14px;
    color: #666;
    line-height: 1.6;
    margin-bottom: 8px;
}

.meal-time {
    font-size: 12px;
    color: #999;
    margin-top: 5px;
}

.meal-delete-btn {
    position: absolute;
    bottom: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    opacity: 0;
    transition: all 0.3s ease;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3; /* Ïù∏ÏïÑÏõÉ Î∞∞ÏßÄÎ≥¥Îã§ ÏúÑÏóê ÌëúÏãú */
}

.meal-record:hover .meal-delete-btn {
    opacity: 0.7;
}

.meal-delete-btn:hover {
    background: rgba(255, 107, 107, 0.1);
    opacity: 1;
    transform: scale(1.1);
}

.meal-delete-btn svg {
    width: 16px;
    height: 16px;
}

.add-meal-btn {
    width: 100%;
    padding: 12px;
    background: rgba(217, 188, 154, 0.5);
    border: none;
    border-radius: 20px;
    color: #5a4a3a;
    font-weight: bold;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 15px;
    position: relative;
    overflow: hidden;
}

.add-meal-btn:hover {
    background: rgba(217, 188, 154, 0.7);
}

/* ÏßÅÏ†ë Ï∂îÍ∞Ä Î∞è Ïù∏ÏïÑÏõÉ Ïó∞Îèô Î≤ÑÌäº Ïª®ÌÖåÏù¥ÎÑà */
.meal-action-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 15px;
}

.direct-add-btn {
    width: 100%;
    padding: 12px;
    background: rgba(217, 188, 154, 0.5);
    border: none;
    border-radius: 20px;
    color: #5a4a3a;
    font-weight: bold;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.direct-add-btn:hover {
    background: rgba(217, 188, 154, 0.7);
}

/* ÏòÅÏñë ÏöîÏïΩ Ïπ¥Îìú */
.nutrition-summary {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-top: 15px;
}

.nutrition-card {
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    border: 1px solid rgba(236, 151, 135, 0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.nutrition-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(236, 151, 135, 0.2);
    background: rgba(236, 151, 135, 0.1);
}

.nutrition-icon {
    font-size: 24px;
    margin-bottom: 5px;
}

.nutrition-value {
    font-size: 20px;
    font-weight: bold;
    color: #EC9787;
}

.nutrition-label {
    font-size: 12px;
    color: #666;
    margin-top: 3px;
}

.sync-status {
    font-size: 9px;
    color: #4CAF50;
    margin-top: 2px;
    font-weight: 500;
}

/* Ïù∏ÏïÑÏõÉ Ïó∞Îèô Î≤ÑÌäº Ïä§ÌÉÄÏùº - Î™®Îì† ÏãùÏÇ¨ ÏãúÍ∞ÑÏóê Ï†ÅÏö© */
.inout-sync-btn {
    width: 100%;
    background: rgba(33, 150, 243, 0.1);
    border: 2px dashed #2196F3;
    border-radius: 15px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 15px;
    color: #2196F3;
    font-weight: 600;
    font-size: 13px;
    position: relative;
    overflow: hidden;
}

.inout-sync-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(33, 150, 243, 0.1), transparent);
    transition: left 0.8s ease;
}

.inout-sync-btn:hover::before {
    left: 100%;
}

.inout-sync-btn:hover {
    background: rgba(33, 150, 243, 0.15);
    border-color: #1976D2;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
}

.inout-sync-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.sync-icon {
    font-size: 16px;
    transition: transform 0.5s ease;
}

.sync-icon.spinning {
    animation: rotate 2s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.sync-text {
    letter-spacing: -0.2px;
}

/* Îπà ÏãùÎã® Î©îÏãúÏßÄ Ïä§ÌÉÄÏùº */
.empty-meal-message {
    text-align: center;
    padding: 40px 20px;
    background: rgba(236, 151, 135, 0.03);
    border-radius: 15px;
    margin-bottom: 15px;
    border: 2px dashed rgba(236, 151, 135, 0.2);
}

.empty-icon {
    font-size: 48px;
    margin-bottom: 15px;
    opacity: 0.6;
}

.empty-text {
    font-size: 16px;
    color: #5a4a3a;
    font-weight: 600;
    margin-bottom: 8px;
}

.empty-subtext {
    font-size: 13px;
    color: #999;
    line-height: 1.4;
}

/* Ïù∏ÏïÑÏõÉ Ïó∞ÎèôÎêú ÏãùÎã® Ïä§ÌÉÄÏùº */
.meal-record.inout-synced {
    border-left: 4px solid #2196F3;
    background: rgba(33, 150, 243, 0.02);
    padding-bottom: 50px; /* Î∞∞ÏßÄÏôÄ Î≤ÑÌäºÏùÑ ÏúÑÌïú Í≥µÍ∞Ñ ÌôïÎ≥¥ */
}

.inout-badge {
    position: absolute;
    bottom: 12px;
    left: 12px; /* ÏôºÏ™ΩÏúºÎ°ú Ïù¥Îèô */
    background: #2196F3;
    color: white;
    font-size: 10px;
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
    z-index: 2;
}

/* Îã®ÏãùÌïòÎü¨ Í∞ÄÍ∏∞ Î≤ÑÌäº Ïä§ÌÉÄÏùº */
.fasting-button {
    width: 100%;
    background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
    border: none;
    border-radius: 20px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
    position: relative;
    overflow: hidden;
    margin-top: 15px;
    font-size: 14px;
}

.fasting-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.fasting-button:hover::before {
    left: 100%;
}

.fasting-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
    background: linear-gradient(135deg, #ff5252, #ff7979);
}

.fasting-button:active {
    transform: translateY(0px);
    box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
}

.fasting-icon {
    font-size: 18px;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

.fasting-text {
    font-size: 14px;
    font-weight: bold;
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    flex: 1;
    text-align: center;
    letter-spacing: -0.3px;
}

.fasting-arrow {
    font-size: 16px;
    color: white;
    font-weight: bold;
    transition: transform 0.3s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.fasting-button:hover .fasting-arrow {
    transform: translateX(3px);
}

/* ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */
.bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 390px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            padding: 15px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px;
            margin: 0 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #999;
        }

        .nav-item:hover {
            background: #faf8f6;
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: #EC9787;
            color: white;
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Îπà ÏÉÅÌÉú Î©îÏãúÏßÄ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        .empty-text {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .empty-subtext {
            font-size: 14px;
            opacity: 0.7;
        }
        
        
/* Î™®Îã¨ Ïä§ÌÉÄÏùº */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: #F2E9E0;
    border-radius: 25px;
    padding: 30px;
    width: 90%;
    max-width: 350px;
    max-height: 80vh;
    overflow-y: auto;
    animation: modalSlideIn 0.3s ease;
}

.confirm-modal-content {
    text-align: center;
    padding: 40px 30px;
}

.confirm-icon {
    font-size: 48px;
    color: #ff6b6b;
    margin-bottom: 20px;
}

.confirm-title {
    font-size: 20px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 15px;
}

.confirm-message {
    font-size: 14px;
    color: #666;
    margin-bottom: 30px;
    line-height: 1.5;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    text-align: center;
    margin-bottom: 25px;
}

.modal-title {
    font-size: 20px;
    font-weight: bold;
    color: #8b6f47;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    font-weight: bold;
    margin-bottom: 8px;
    color: #8b6f47;
}

.text-input {
    width: 100%;
    padding: 12px;
    border: 2px solid #e9bf94;
    border-radius: 10px;
    font-size: 16px;
}

.text-input:focus {
    outline: none;
    border-color: #d4a574;
    box-shadow: 0 0 10px rgba(212, 165, 116, 0.3);
}

.input-hint {
    font-size: 11px;
    color: #999;
    margin-top: 5px;
}

textarea.text-input {
    resize: vertical;
    min-height: 100px;
}

.modal-footer {
    display: flex;
    gap: 10px;
    margin-top: 25px;
}

.btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background: #f5f5f5;
    color: #666;
}

.btn-save {
    background: #EC9787;
    color: white;
}

.btn-delete {
    background: #ff6b6b;
    color: white;
}

.btn-save:hover {
    background: #E58775;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(236, 151, 135, 0.4);
}

.btn-delete:hover {
    background: #ff5252;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
}

/* Í±¥Í∞ï ÏùºÍ∏∞ Î™®Îã¨ Ïä§ÌÉÄÏùº */
.diary-modal-content {
    max-width: 400px;
    max-height: 90vh;
}

.mood-selector {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 10px 0;
}

.mood-btn {
    width: 50px;
    height: 50px;
    border: 2px solid #e0e0e0;
    border-radius: 50%;
    background: white;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mood-btn:hover {
    transform: scale(1.1);
    border-color: #EC9787;
}

.mood-btn.selected {
    border-color: #EC9787;
    background: rgba(236, 151, 135, 0.1);
    transform: scale(1.1);
}

.diary-textarea {
    min-height: 120px;
    resize: vertical;
}

.photo-upload-area {
    border: 2px dashed #e0e0e0;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.5);
}

.photo-upload-area:hover {
    border-color: #EC9787;
    background: rgba(236, 151, 135, 0.05);
}

.upload-placeholder {
    color: #666;
}

.upload-icon {
    font-size: 32px;
    margin-bottom: 8px;
}

.upload-text {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 5px;
    color: #5a4a3a;
}

.upload-subtext {
    font-size: 12px;
    color: #999;
    line-height: 1.4;
}

.photo-preview {
    position: relative;
    border-radius: 8px;
    overflow: hidden;
}

.photo-preview img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: 8px;
}

.photo-remove-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #666;
    transition: all 0.3s ease;
}

.photo-remove-btn:hover {
    background: #ff6b6b;
    color: white;
}

/* ÏÇ≠Ï†ú ÌôïÏù∏ Î™®Îã¨ */
.deleting {
    animation: slideOut 0.3s ease forwards;
}

@keyframes slideOut {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(-100%);
    }
}

/* ÏÑ±Í≥µ Î©îÏãúÏßÄ */
.success-toast {
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: #4CAF50;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    z-index: 10000;
    font-size: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    animation: slideDown 0.3s ease;
}
</style>
</head>
<body>
<div class="container">
<!-- Ìó§Îçî -->
<header class="header">
    <h1 class="header-title">ÎÇ¥ Í±¥Í∞ï Í¥ÄÎ¶¨</h1>
</header>

<!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
<div class="content">
    <!-- Î≥µÏö© Îã¨ÏÑ±Î•† ÏÑπÏÖò -->
    <section class="section">
        <h2 class="section-title">
            Î™©Ìëú Îã¨ÏÑ±Î•†
        </h2>
        
        <!-- Ïò§Îäò ÎÇ†Ïßú Î∞è ÏÉÅÌÉú Ìó§Îçî -->
        <div class="today-header">
            <div class="today-date-info">
                <div class="today-date-text">2025.07.27.ÏùºÏöîÏùº</div>
                <div class="achievement-status">
                    <span class="status-text">2Ïùº Ïó∞ÏÜç Î™©Ìëú Îã¨ÏÑ±Ï§ë</span>
                    <div class="status-icon">üéØ</div>
                </div>
            </div>
            <button class="header-calendar-toggle" onclick="toggleCalendar()">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                </svg>
            </button>
        </div>
        
        <!-- ÏõîÍ∞Ñ Ï∫òÎ¶∞Îçî -->
        <div id="calendarContainer" class="calendar-container hidden">
            <div class="calendar-header">
                <div>
                    <div class="calendar-date">2025ÎÖÑ 7Ïõî</div>
                </div>
                <div class="calendar-nav">
                    <button class="nav-arrow" onclick="changeMonth(-1)">‚Äπ</button>
                    <button class="nav-arrow" onclick="changeMonth(1)">‚Ä∫</button>
                </div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-day-header">Ïùº</div>
                <div class="calendar-day-header">Ïõî</div>
                <div class="calendar-day-header">Ìôî</div>
                <div class="calendar-day-header">Ïàò</div>
                <div class="calendar-day-header">Î™©</div>
                <div class="calendar-day-header">Í∏à</div>
                <div class="calendar-day-header">ÌÜ†</div>
                
                <!-- Ïù¥Ï†Ñ Îã¨ ÎßêÏùºÎì§ -->
                <div class="calendar-day other-month">29</div>
                <div class="calendar-day other-month">30</div>
                
                <!-- 7Ïõî -->
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-01')">1</div>
                <div class="calendar-day completed period" onclick="openDiaryModal('2025-07-02')">2</div>
                <div class="calendar-day completed period" onclick="openDiaryModal('2025-07-03')">3</div>
                <div class="calendar-day completed period" onclick="openDiaryModal('2025-07-04')">4</div>
                <div class="calendar-day completed period" onclick="openDiaryModal('2025-07-05')">5</div>
                
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-06')">6</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-07')">7</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-08')">8</div>
                <div class="calendar-day partial" onclick="openDiaryModal('2025-07-09')">9</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-10')">10</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-11')">11</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-12')">12</div>
                
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-13')">13</div>
                <div class="calendar-day partial" onclick="openDiaryModal('2025-07-14')">14</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-15')">15</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-16')">16</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-17')">17</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-18')">18</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-19')">19</div>
                
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-20')">20</div>
                <div class="calendar-day missed" onclick="openDiaryModal('2025-07-21')">21</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-22')">22</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-23')">23</div>
                <div class="calendar-day partial" onclick="openDiaryModal('2025-07-24')">24</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-25')">25</div>
                <div class="calendar-day completed" onclick="openDiaryModal('2025-07-26')">26</div>
                
                <div class="calendar-day today" onclick="openDiaryModal('2025-07-27')">27</div>
                <div class="calendar-day" onclick="openDiaryModal('2025-07-28')">28</div>
                <div class="calendar-day" onclick="openDiaryModal('2025-07-29')">29</div>
                <div class="calendar-day" onclick="openDiaryModal('2025-07-30')">30</div>
                <div class="calendar-day" onclick="openDiaryModal('2025-07-31')">31</div>
                
                <!-- Îã§Ïùå Îã¨ Ï≤´ÎÇ†Îì§ -->
                <div class="calendar-day other-month">1</div>
                <div class="calendar-day other-month">2</div>
            </div>
            
            <div class="calendar-footer">
                <div class="calendar-legend">
                    <span class="legend-item">
                        <span class="legend-dot completed"></span>
                        <span class="legend-text">ÏôÑÎ£å</span>
                    </span>
                    <span class="legend-item">
                        <span class="legend-dot partial"></span>
                        <span class="legend-text">Î∂ÄÎ∂ÑÏôÑÎ£å</span>
                    </span>
                    <span class="legend-item">
                        <span class="legend-dot missed"></span>
                        <span class="legend-text">ÎØ∏ÏôÑÎ£å</span>
                    </span>
                    <span class="legend-item">
                        <span class="legend-dot period"></span>
                        <span class="legend-text">ÏÉùÎ¶¨</span>
                    </span>
                </div>
                
                <!-- ÏÉùÎ¶¨ ÏòàÏ†ïÏùº ÏÑπÏÖò -->
                <div class="period-info-section">
                    <div class="period-header">
                        <div class="period-icon">üå∏</div>
                        <div class="period-details">
                            <div class="period-title">Îã§Ïùå ÏÉùÎ¶¨ ÏòàÏ†ïÏùº</div>
                            <div class="period-date">8Ïõî 3Ïùº (7Ïùº ÌõÑ)</div>
                        </div>
                        <button class="period-settings-btn" onclick="openPeriodSettings()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="period-progress">
                        <div class="cycle-progress-bar">
                            <div class="cycle-progress-fill" style="width: 75%"></div>
                        </div>
                        <div class="cycle-info">
                            <span>ÌòÑÏû¨ Ï£ºÍ∏∞: 21ÏùºÏ∞®</span>
                            <span>ÌèâÍ∑† Ï£ºÍ∏∞: 28Ïùº</span>
                        </div>
                    </div>
                </div>
                
                <!-- ÏõîÎ≥Ñ Î†àÌè¨Ìä∏ Î≤ÑÌäº -->
                <button class="monthly-report-btn" onclick="openMonthlyReport()">
                    <div class="report-icon">üìä</div>
                    <div class="report-text">
                        <div class="report-title">7Ïõî Î™©Ìëú Îã¨ÏÑ± Î†àÌè¨Ìä∏</div>
                        <div class="report-subtitle">AIÍ∞Ä Î∂ÑÏÑùÌïú ÎÇòÏùò Í±¥Í∞ï Í¥ÄÎ¶¨ ÌòÑÌô©</div>
                    </div>
                    <div class="report-arrow">‚Üí</div>
                </button>
                
                <div class="calendar-note">
                    ÎÇ†ÏßúÎ•º ÌÅ¥Î¶≠ÌïòÎ©¥ Ìï¥Îãπ ÎÇ†Ïùò Í±¥Í∞ï ÏùºÍ∏∞Î•º ÏûëÏÑ±Ìï† Ïàò ÏûàÏñ¥Ïöî
                </div>
            </div>
        </div>
        
        <!-- Îã¨ÏÑ±Î•† ÏÉÅÏÑ∏ Ï†ïÎ≥¥ -->
        <div id="achievementContainer" class="achievement-container">
            <div class="achievement-card">
                <div class="achievement-header">
                    <div class="achievement-label">Ïù¥Î≤à Ï£º Ï†ÑÏ≤¥ Î™©Ìëú Îã¨ÏÑ±Î•†</div>
                    <div class="achievement-percentage">87%</div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-fill" style="width: 87%"></div>
                </div>
                <div class="progress-info">
                    <span>Îã¨ÏÑ±ÏôÑÎ£å: 22Í∞ú</span>
                    <span>Ï†ÑÏ≤¥Î™©Ìëú: 25Í∞ú</span>
                </div>
                
                <!-- Î™©ÌëúÎ≥Ñ Îã¨ÏÑ± ÌòÑÌô© -->
                <div class="goal-category-section">
                    <div class="category-toggle-header" onclick="toggleCategoryDetails()">
                        <h3 class="category-title">Î™©ÌëúÎ≥Ñ Îã¨ÏÑ± ÌòÑÌô©</h3>
                        <div class="toggle-arrow" id="categoryArrow">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="category-cards" id="categoryCards">
                        <div class="category-card supplement">
                            <div class="category-icon">üíä</div>
                            <div class="category-content">
                                <div class="category-name">ÏòÅÏñëÏ†ú</div>
                                <div class="category-progress">
                                    <span class="progress-numbers">12/15</span>
                                    <div class="mini-progress-bar">
                                        <div class="mini-progress-fill supplement-color" style="width: 80%"></div>
                                    </div>
                                    <span class="progress-percentage">80%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="category-card exercise">
                            <div class="category-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                            <div class="category-content">
                                <div class="category-name">Ïö¥Îèô</div>
                                <div class="category-progress">
                                    <span class="progress-numbers">5/7</span>
                                    <div class="mini-progress-bar">
                                        <div class="mini-progress-fill exercise-color" style="width: 71%"></div>
                                    </div>
                                    <span class="progress-percentage">71%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="category-card other">
                            <div class="category-icon">üéØ</div>
                            <div class="category-content">
                                <div class="category-name">Í∏∞ÌÉÄ</div>
                                <div class="category-progress">
                                    <span class="progress-numbers">5/5</span>
                                    <div class="mini-progress-bar">
                                        <div class="mini-progress-fill other-color" style="width: 100%"></div>
                                    </div>
                                    <span class="progress-percentage">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="achievement-stats">
                    <div class="stat-item">
                        <div class="stat-value">22Ïùº</div>
                        <div class="stat-label">Ïù¥Î≤à Îã¨ Îã¨ÏÑ±</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">5Ïùº</div>
                        <div class="stat-label">Ïó∞ÏÜç Îã¨ÏÑ±</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">156Í∞ú</div>
                        <div class="stat-label">Ï¥ù ÏôÑÎ£å Î™©Ìëú</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- ÎÇ¥Í∞Ä ÏÑ§Ï†ïÌïú Î™©Ìëú ÏÑπÏÖò -->
    <section class="section">
        <h2 class="section-title">
            ÎÇ¥Í∞Ä ÏÑ§Ï†ïÌïú Î™©Ìëú
        </h2>
        
        <div id="goals-container">
            <div class="goal-item" data-goal-id="1">
                <div class="goal-info">
                    <div class="goal-title">Îß§Ïùº ÏòÅÏñëÏ†ú 100% Î≥µÏö©ÌïòÍ∏∞</div>
                    <div class="goal-progress">Ïù¥Î≤à Îã¨: 22Ïùº / 30Ïùº</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#EC9787" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="31.4"/>
                            </svg>
                            <div class="progress-text" style="color: #EC9787">73%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(1, 'Îß§Ïùº ÏòÅÏñëÏ†ú 100% Î≥µÏö©ÌïòÍ∏∞')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="goal-item" data-goal-id="2">
                <div class="goal-info">
                    <div class="goal-title">ÌïòÎ£® 2L Ïù¥ÏÉÅ Î¨º ÎßàÏãúÍ∏∞</div>
                    <div class="goal-progress">Ïò§Îäò: 1.5L / 2L</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#2196F3" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="31.4"/>
                            </svg>
                            <div class="progress-text" style="color: #2196F3">75%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(2, 'ÌïòÎ£® 2L Ïù¥ÏÉÅ Î¨º ÎßàÏãúÍ∏∞')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="goal-item" data-goal-id="3">
                <div class="goal-info">
                    <div class="goal-title">Ï£º 3Ìöå Ïù¥ÏÉÅ Ïö¥ÎèôÌïòÍ∏∞</div>
                    <div class="goal-progress">Ïù¥Î≤à Ï£º: 2Ìöå / 3Ìöå</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#FF9800" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="42"/>
                            </svg>
                            <div class="progress-text" style="color: #FF9800">67%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(3, 'Ï£º 3Ìöå Ïù¥ÏÉÅ Ïö¥ÎèôÌïòÍ∏∞')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <button class="add-goal-btn" onclick="openGoalModal()">
            + ÏÉàÎ°úÏö¥ Î™©Ìëú Ï∂îÍ∞Ä
        </button>
    </section>
    
    <!-- ÏãùÎã® Í∏∞Î°ù ÏÑπÏÖò -->
    <section class="section">
        <h2 class="section-title">
            Ïò§ÎäòÏùò ÏãùÎã® Í∏∞Î°ù
        </h2>
        
        <div class="meal-time-tabs">
            <button class="meal-tab active" data-meal-type="breakfast">ÏïÑÏπ®</button>
            <button class="meal-tab" data-meal-type="lunch">Ï†êÏã¨</button>
            <button class="meal-tab" data-meal-type="dinner">Ï†ÄÎÖÅ</button>
            <button class="meal-tab" data-meal-type="snack">Í∞ÑÏãù</button>
        </div>
        
        <div id="meal-records">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
        </div>
        
        <!-- ÏòÅÏñë ÏöîÏïΩ -->
        <div class="nutrition-summary">
            <div class="nutrition-card" onclick="showNutritionDetail('calories')">
                <div class="nutrition-icon">üî•</div>
                <div class="nutrition-value" id="calories-value">1,520</div>
                <div class="nutrition-label">ÏπºÎ°úÎ¶¨</div>
                <div class="sync-status">üì± Ïù∏ÏïÑÏõÉ Ïó∞ÎèôÎê®</div>
            </div>
            <div class="nutrition-card" onclick="showNutritionDetail('protein')">
                <div class="nutrition-icon">ü•©</div>
                <div class="nutrition-value" id="protein-value">68g</div>
                <div class="nutrition-label">Îã®Î∞±Ïßà</div>
            </div>
            <div class="nutrition-card" onclick="showNutritionDetail('carbs')">
                <div class="nutrition-icon">üåæ</div>
                <div class="nutrition-value" id="carbs-value">186g</div>
                <div class="nutrition-label">ÌÉÑÏàòÌôîÎ¨º</div>
            </div>
            <div class="nutrition-card" onclick="showNutritionDetail('fat')">
                <div class="nutrition-icon">ü•ë</div>
                <div class="nutrition-value" id="fat-value">52g</div>
                <div class="nutrition-label">ÏßÄÎ∞©</div>
            </div>
        </div>
        
        <!-- Îã®ÏãùÌïòÎü¨ Í∞ÄÍ∏∞ Î≤ÑÌäº -->
        <button class="fasting-button" onclick="goToFasting()">
            <div class="fasting-icon">üö´</div>
            <span class="fasting-text">Îã®ÏãùÌïòÎü¨ Í∞ÄÍ∏∞</span>
            <div class="fasting-arrow">‚Üí</div>
        </button>
    </section>
</div>

<!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
<nav class="bottom-nav">
    <div class="nav-item" onclick="navigateTo('community', this)">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                <circle cx="18.5" cy="10" r="2.5"/>
                <circle cx="5.5" cy="10" r="2.5"/>
                <path d="M18.5 12.5c-1.33 0-4 0.67-4 2v1.5h8V14.5c0-1.33-2.67-2-4-2z"/>
                <path d="M5.5 12.5c-1.33 0-4 0.67-4 2v1.5h8V14.5c0-1.33-2.67-2-4-2z"/>
            </svg>
        </div>
        <div class="nav-label">Ïª§ÎÆ§ÎãàÌã∞</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('chatbot', this)" ondblclick="uploadChatbotIcon()">
        <div class="nav-icon" id="chatbotIcon">
            <svg width="24" height="24" viewBox="0 0 512 512" fill="currentColor">
                <!-- Î©îÏù∏ ÏñºÍµ¥ -->
                <rect x="130" y="180" width="252" height="200" rx="60" fill="currentColor"/>
                <!-- ÏôºÏ™Ω Í∑Ä -->
                <ellipse cx="160" cy="160" rx="35" ry="45" fill="currentColor"/>
                <!-- Ïò§Î•∏Ï™Ω Í∑Ä -->
                <ellipse cx="350" cy="160" rx="35" ry="45" fill="currentColor"/>
                <!-- ÏûëÏùÄ ÌïòÌä∏ -->
                <path d="M256 120 C250 110, 240 110, 240 120 C240 110, 230 110, 230 120 C230 130, 240 140, 256 150 C270 140, 280 130, 280 120 C280 110, 270 110, 270 120 C270 110, 260 110, 256 120 Z" fill="#ffb3ba"/>
                <!-- ÏôºÏ™Ω Îàà -->
                <circle cx="190" cy="240" r="18" fill="white"/>
                <circle cx="190" cy="235" r="7" fill="currentColor"/>
                <!-- Ïò§Î•∏Ï™Ω Îàà -->
                <circle cx="320" cy="240" r="18" fill="white"/>
                <circle cx="320" cy="235" r="7" fill="currentColor"/>
                <!-- ÏûÖ (Îëê Í∞úÏùò Îë•Í∑º ÏÇ¨Í∞ÅÌòï) -->
                <rect x="200" y="310" width="45" height="30" rx="15" fill="white"/>
                <rect x="265" y="310" width="45" height="30" rx="15" fill="white"/>
                <line x1="255" y1="310" x2="255" y2="340" stroke="currentColor" stroke-width="5"/>
            </svg>
        </div>
        <div class="nav-label">Ï±óÎ¥á</div>
    </div>

    <div class="nav-item active" onclick="navigateTo('home', this)">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
        </div>
        <div class="nav-label">Ìôà</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('health', this)">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
        </div>
        <div class="nav-label">ÎÇ¥ Í±¥Í∞ï</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('more', this)">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="5" cy="12" r="2"/>
                <circle cx="12" cy="12" r="2"/>
                <circle cx="19" cy="12" r="2"/>
            </svg>
        </div>
        <div class="nav-label">ÎçîÎ≥¥Í∏∞</div>
    </div>
</nav>

<!-- Î™©Ìëú Ï∂îÍ∞Ä Î™®Îã¨ -->
<div id="goalModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ÏÉàÎ°úÏö¥ Î™©Ìëú Ï∂îÍ∞Ä</h2>
        </div>
        
        <div class="form-group">
            <label class="form-label">Î™©Ìëú Ïù¥Î¶Ñ *</label>
            <input type="text" class="text-input" id="goalName" placeholder="Ïòà: Îß§Ïùº 30Î∂Ñ Ïö¥ÎèôÌïòÍ∏∞" maxlength="50">
            <div class="input-hint">ÏµúÎåÄ 50ÏûêÍπåÏßÄ ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Î™©Ìëú Ïú†Ìòï *</label>
            <select class="text-input" id="goalType">
                <option value="daily">Îß§Ïùº</option>
                <option value="weekly">Ï£ºÍ∞Ñ</option>
                <option value="monthly">ÏõîÍ∞Ñ</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Î™©Ìëú ÏàòÏπò *</label>
            <input type="number" class="text-input" id="goalTarget" placeholder="Ïòà: 30" min="1" max="9999">
            <div class="input-hint">1~9999 ÏÇ¨Ïù¥Ïùò Ïà´ÏûêÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Îã®ÏúÑ *</label>
            <input type="text" class="text-input" id="goalUnit" placeholder="Ïòà: Î∂Ñ, Ìöå, km, Ïûî" maxlength="10">
            <div class="input-hint">ÏµúÎåÄ 10ÏûêÍπåÏßÄ ÏûÖÎ†• Í∞ÄÎä•Ìï©ÎãàÎã§</div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeGoalModal()">Ï∑®ÏÜå</button>
            <button class="btn btn-save" onclick="saveGoal()">Ï†ÄÏû•</button>
        </div>
    </div>
</div>

<!-- ÏãùÎã® Ï∂îÍ∞Ä Î™®Îã¨ -->
<div id="mealModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ÏãùÎã® Ï∂îÍ∞Ä</h2>
        </div>
        
        <div class="form-group">
            <label class="form-label">ÏãùÏÇ¨ ÏãúÍ∞Ñ</label>
            <select class="text-input" id="mealTime">
                <option value="breakfast">ÏïÑÏπ®</option>
                <option value="lunch">Ï†êÏã¨</option>
                <option value="dinner">Ï†ÄÎÖÅ</option>
                <option value="snack">Í∞ÑÏãù</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Î©îÎâ¥</label>
            <textarea class="text-input" id="mealMenu" placeholder="Î®πÏùÄ ÏùåÏãùÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">ÏòàÏÉÅ ÏπºÎ°úÎ¶¨</label>
            <input type="number" class="text-input" id="mealCalories" placeholder="Ïòà: 500">
        </div>
        
        <div class="form-group">
            <label class="form-label">Î©îÎ™®</label>
            <input type="text" class="text-input" id="mealNote" placeholder="Ïòà: Ìè¨ÎßåÍ∞ê Ï¢ãÏùå, ÏÜåÌôî ÏûòÎê®">
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeMealModal()">Ï∑®ÏÜå</button>
            <button class="btn btn-save" onclick="saveMeal()">Ï†ÄÏû•</button>
        </div>
    </div>
</div>

<!-- Í±¥Í∞ï ÏùºÍ∏∞ ÏûëÏÑ± Î™®Îã¨ -->
<div id="diaryModal" class="modal">
    <div class="modal-content diary-modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="diaryModalTitle">Í±¥Í∞ï ÏùºÍ∏∞ ÏûëÏÑ±</h2>
        </div>
        
        <div class="form-group">
            <label class="form-label">Ïò§ÎäòÏùò Í∏∞Î∂Ñ</label>
            <div class="mood-selector">
                <button class="mood-btn" data-mood="great" onclick="selectMood('great')">üòä</button>
                <button class="mood-btn" data-mood="good" onclick="selectMood('good')">üôÇ</button>
                <button class="mood-btn" data-mood="okay" onclick="selectMood('okay')">üòê</button>
                <button class="mood-btn" data-mood="bad" onclick="selectMood('bad')">üòü</button>
                <button class="mood-btn" data-mood="terrible" onclick="selectMood('terrible')">üò¢</button>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Ïò§ÎäòÏùò Ìïú Ï§Ñ</label>
            <input type="text" class="text-input" id="diaryTitle" placeholder="Ïò§Îäò ÌïòÎ£®Î•º Ìïú Ï§ÑÎ°ú ÌëúÌòÑÌï¥Î≥¥ÏÑ∏Ïöî" maxlength="50">
        </div>
        
        <div class="form-group">
            <label class="form-label">Í±¥Í∞ï ÏùºÍ∏∞</label>
            <textarea class="text-input diary-textarea" id="diaryContent" placeholder="Ïò§ÎäòÏùò Í±¥Í∞ï ÏÉÅÌÉú, Ïö¥Îèô, ÏãùÎã®, ÎäêÎÇÄ Ï†ê Îì±ÏùÑ ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî"></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">ÏÇ¨ÏßÑ Ï≤®Î∂Ä</label>
            <div class="photo-upload-area" onclick="document.getElementById('photoInput').click()">
                <div class="upload-placeholder" id="uploadPlaceholder">
                    <div class="upload-icon">üì∑</div>
                    <div class="upload-text">ÏÇ¨ÏßÑÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî</div>
                    <div class="upload-subtext">Ïö¥Îèô, ÏãùÎã®, Í±¥Í∞ï Í¥ÄÎ†® ÏÇ¨ÏßÑÏùÑ ÏóÖÎ°úÎìúÌï† Ïàò ÏûàÏñ¥Ïöî</div>
                </div>
                <div class="photo-preview" id="photoPreview" style="display: none;">
                    <img id="previewImage" alt="ÎØ∏Î¶¨Î≥¥Í∏∞">
                    <button class="photo-remove-btn" onclick="removePhoto()" type="button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeDiaryModal()">Ï∑®ÏÜå</button>
            <button class="btn btn-save" onclick="saveDiary()">Ï†ÄÏû•</button>
        </div>
    </div>
</div>
<div id="confirmModal" class="modal">
    <div class="modal-content confirm-modal-content">
        <div class="confirm-icon">üóëÔ∏è</div>
        <div class="confirm-title" id="confirmTitle">Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†Ïñ¥Ïöî?</div>
        <div class="confirm-message" id="confirmMessage">ÏÇ≠Ï†úÎêú Ìï≠Î™©ÏùÄ Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.</div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeConfirmModal()">Ï∑®ÏÜå</button>
            <button class="btn btn-delete" id="confirmDeleteBtn">ÏÇ≠Ï†ú</button>
        </div>
    </div>
</div>
</div>

<script>
// Ï†ÑÏó≠ Î≥ÄÏàò
let calendarVisible = false;
let currentMonth = 7;
let currentYear = 2025;
let goalIdCounter = 4;
let mealIdCounter = 2;
let currentMealType = 'breakfast';
let categoryDetailsVisible = false; // Î™©ÌëúÎ≥Ñ ÌòÑÌô© ÌÜ†Í∏Ä ÏÉÅÌÉú
let selectedMood = null; // ÏÑ†ÌÉùÎêú Í∏∞Î∂Ñ
let selectedDate = null; // ÏÑ†ÌÉùÎêú ÎÇ†Ïßú

// Í±¥Í∞ï ÏùºÍ∏∞ Î™®Îã¨ Í¥ÄÎ†® Ìï®ÏàòÎì§
function openDiaryModal(date) {
    selectedDate = date;
    const modal = document.getElementById('diaryModal');
    const modalTitle = document.getElementById('diaryModalTitle');
    
    // ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ
    const dateObj = new Date(date);
    const formattedDate = `${dateObj.getFullYear()}.${String(dateObj.getMonth() + 1).padStart(2, '0')}.${String(dateObj.getDate()).padStart(2, '0')}`;
    modalTitle.textContent = `${formattedDate} Í±¥Í∞ï ÏùºÍ∏∞`;
    
    modal.classList.add('show');
    clearDiaryForm();
}

function closeDiaryModal() {
    document.getElementById('diaryModal').classList.remove('show');
    clearDiaryForm();
}

function clearDiaryForm() {
    selectedMood = null;
    document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
    document.getElementById('diaryTitle').value = '';
    document.getElementById('diaryContent').value = '';
    removePhoto();
}

function selectMood(mood) {
    selectedMood = mood;
    document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
    document.querySelector(`[data-mood="${mood}"]`).classList.add('selected');
}

function handlePhotoUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    if (file.size > 5 * 1024 * 1024) { // 5MB Ï†úÌïú
        alert('ÌååÏùº ÌÅ¨Í∏∞Îäî 5MB Ïù¥ÌïòÏó¨Ïïº Ìï©ÎãàÎã§.');
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const placeholder = document.getElementById('uploadPlaceholder');
        const preview = document.getElementById('photoPreview');
        const previewImage = document.getElementById('previewImage');
        
        placeholder.style.display = 'none';
        preview.style.display = 'block';
        previewImage.src = e.target.result;
    };
    reader.readAsDataURL(file);
}

function removePhoto() {
    const placeholder = document.getElementById('uploadPlaceholder');
    const preview = document.getElementById('photoPreview');
    const photoInput = document.getElementById('photoInput');
    
    placeholder.style.display = 'block';
    preview.style.display = 'none';
    photoInput.value = '';
}

function saveDiary() {
    const title = document.getElementById('diaryTitle').value.trim();
    const content = document.getElementById('diaryContent').value.trim();
    
    if (!selectedMood && !title && !content) {
        alert('Í∏∞Î∂Ñ, Ï†úÎ™©, ÎòêÎäî ÎÇ¥Ïö© Ï§ë ÌïòÎÇòÎäî ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    // ÏùºÍ∏∞ Ï†ÄÏû• Î°úÏßÅ (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóê Ï†ÄÏû•)
    const diaryData = {
        date: selectedDate,
        mood: selectedMood,
        title: title,
        content: content,
        hasPhoto: document.getElementById('photoPreview').style.display === 'block'
    };
    
    console.log('ÏùºÍ∏∞ Ï†ÄÏû•:', diaryData);
    
    showSuccessMessage('Í±¥Í∞ï ÏùºÍ∏∞Í∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§! üìù');
    closeDiaryModal();
}

// Î™©ÌëúÎ≥Ñ Îã¨ÏÑ± ÌòÑÌô© ÌÜ†Í∏Ä
function toggleCategoryDetails() {
    const categoryCards = document.getElementById('categoryCards');
    const arrow = document.getElementById('categoryArrow');
    
    categoryDetailsVisible = !categoryDetailsVisible;
    
    if (categoryDetailsVisible) {
        categoryCards.classList.add('expanded');
        arrow.classList.add('expanded');
    } else {
        categoryCards.classList.remove('expanded');
        arrow.classList.remove('expanded');
    }
}

// ÏãùÎã® Îç∞Ïù¥ÌÑ∞ - Î™®Îì† ÏãùÏÇ¨ ÏãúÍ∞ÑÏóê Ïù∏ÏïÑÏõÉ Ïó∞Îèô Îç∞Ïù¥ÌÑ∞ Ìè¨Ìï®
const mealData = {
    breakfast: [
        {
            id: 'inout-0',
            title: 'ÏïÑÏπ®: Ïò§Ìä∏Î∞Ä + Î∞îÎÇòÎÇò',
            items: 'Ïò§Ìä∏Î∞Ä 1Ïªµ, Î∞îÎÇòÎÇò 1Í∞ú, ÏïÑÎ™¨Îìú Ïö∞Ïú†',
            calories: 380,
            time: '08:30',
            source: 'inout'
        }
    ],
    lunch: [
        {
            id: 'inout-1',
            title: 'Ï†êÏã¨: Îã≠Í∞ÄÏä¥ÏÇ¥ ÏÉêÎü¨Îìú',
            items: 'Îã≠Í∞ÄÏä¥ÏÇ¥ 150g, ÌòºÌï© Ï±ÑÏÜå, Ïò¨Î¶¨Î∏åÏò§Ïùº ÎìúÎ†àÏã±',
            calories: 450,
            time: '12:30',
            source: 'inout'
        }
    ],
    dinner: [
        {
            id: 'inout-2',
            title: 'Ï†ÄÎÖÅ: Ïó∞Ïñ¥Íµ¨Ïù¥ Ï†ïÏãù',
            items: 'Ïó∞Ïñ¥ 200g, ÌòÑÎØ∏Î∞•, Î∏åÎ°úÏΩúÎ¶¨, ÎãπÍ∑º',
            calories: 620,
            time: '19:00',
            source: 'inout'
        }
    ],
    snack: [
        {
            id: 'inout-3',
            title: 'Í∞ÑÏãù: Í≤¨Í≥ºÎ•ò + ÏöîÍ±∞Ìä∏',
            items: 'ÌòºÌï©Í≤¨Í≥ºÎ•ò 30g, Í∑∏Î¶≠ ÏöîÍ±∞Ìä∏ 150g',
            calories: 200,
            time: '15:30',
            source: 'inout'
        }
    ]
};

// Ï∫òÎ¶∞Îçî ÌÜ†Í∏Ä
function toggleCalendar() {
    const calendarContainer = document.getElementById('calendarContainer');
    const achievementContainer = document.getElementById('achievementContainer');
    
    calendarVisible = !calendarVisible;
    
    if (calendarVisible) {
        calendarContainer.classList.remove('hidden');
        achievementContainer.classList.add('hidden');
    } else {
        calendarContainer.classList.add('hidden');
        achievementContainer.classList.remove('hidden');
        
        setTimeout(() => {
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = '0%';
                setTimeout(() => {
                    progressFill.style.width = '87%';
                }, 100);
            }
        }, 100);
    }
}

// Ïõî Î≥ÄÍ≤Ω
function changeMonth(direction) {
    currentMonth += direction;
    
    if (currentMonth > 12) {
        currentMonth = 1;
        currentYear++;
    } else if (currentMonth < 1) {
        currentMonth = 12;
        currentYear--;
    }
    
    const calendarDateElement = document.querySelector('.calendar-date');
    if (calendarDateElement) {
        calendarDateElement.textContent = `${currentYear}ÎÖÑ ${currentMonth}Ïõî`;
    }
}

// ÏãùÏÇ¨ ÌÉ≠ ÏÑ†ÌÉù
function selectMealTab(mealType) {
    currentMealType = mealType;
    
    // Î™®Îì† ÌÉ≠ÏóêÏÑú active ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
    document.querySelectorAll('.meal-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // ÌÅ¥Î¶≠Îêú ÌÉ≠Ïóê active ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
    const clickedTab = document.querySelector(`[data-meal-type="${mealType}"]`);
    if (clickedTab) {
        clickedTab.classList.add('active');
    }
    
    // Ìï¥Îãπ ÏãùÏÇ¨ Í∏∞Î°ù ÌëúÏãú
    updateMealRecords(mealType);
}

// ÏãùÎã® Í∏∞Î°ù ÏóÖÎç∞Ïù¥Ìä∏ - Î≤ÑÌäº ÏàúÏÑú Î≥ÄÍ≤Ω
function updateMealRecords(mealType) {
    const records = mealData[mealType] || [];
    const recordsContainer = document.getElementById('meal-records');
    
    if (!recordsContainer) return;
    
    const timeLabels = {
        'breakfast': 'ÏïÑÏπ®',
        'lunch': 'Ï†êÏã¨', 
        'dinner': 'Ï†ÄÎÖÅ',
        'snack': 'Í∞ÑÏãù'
    };
    
    let html = '';
    
    if (records.length > 0) {
        records.forEach(record => {
            const sourceClass = record.source === 'inout' ? 'inout-synced' : '';
            const sourceBadge = record.source === 'inout' ? '<div class="inout-badge">Ïù∏ÏïÑÏõÉ</div>' : '';
            
            html += `
                <div class="meal-record ${sourceClass}" data-meal-id="${record.id}">
                    <div class="meal-header">
                        <span class="meal-title">${record.title}</span>
                        <span class="meal-calories">${record.calories} kcal</span>
                    </div>
                    <div class="meal-items">${record.items}</div>
                    <div class="meal-time">${record.time}</div>
                    ${sourceBadge}
                    <button class="meal-delete-btn" onclick="confirmDeleteMeal('${record.id}', '${record.title}')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            `;
        });
    } else {
        html += `
            <div class="empty-meal-message">
                <div class="empty-icon">üçΩÔ∏è</div>
                <div class="empty-text">${timeLabels[mealType]} ÏãùÎã®Ïù¥ ÏïÑÏßÅ Í∏∞Î°ùÎêòÏßÄ ÏïäÏïòÏñ¥Ïöî</div>
                <div class="empty-subtext">ÏïÑÎûò Î≤ÑÌäºÎì§ÏùÑ ÎàåÎü¨ ÏãùÎã®ÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî!</div>
            </div>
        `;
    }
    
    // Î≤ÑÌäºÎì§ÏùÑ Ïª®ÌÖåÏù¥ÎÑàÎ°ú Í∞êÏã∏Í∏∞
    html += `
        <div class="meal-action-buttons">
            <button class="direct-add-btn" onclick="openMealModal('${mealType}')">
                + ÏßÅÏ†ë ÏãùÎã® Ï∂îÍ∞ÄÌïòÍ∏∞
            </button>
            <button class="inout-sync-btn" onclick="syncWithInOut('${mealType}')">
                <div class="sync-icon" id="sync-icon-${mealType}">üîÑ</div>
                <span class="sync-text" id="sync-text-${mealType}">Ïù∏ÏïÑÏõÉ Ïï±ÏóêÏÑú ${timeLabels[mealType]} Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞</span>
            </button>
        </div>
    `;
    
    recordsContainer.innerHTML = html;
}

// Î™©Ìëú ÏÇ≠Ï†ú ÌôïÏù∏
function confirmDeleteGoal(goalId, goalName) {
    const modal = document.getElementById('confirmModal');
    const title = document.getElementById('confirmTitle');
    const message = document.getElementById('confirmMessage');
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    
    title.textContent = 'Î™©ÌëúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†Ïñ¥Ïöî?';
    message.innerHTML = `<strong>"${goalName}"</strong><br>ÏÇ≠Ï†úÎêú Î™©ÌëúÎäî Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.`;
    
    confirmBtn.onclick = () => deleteGoal(goalId);
    modal.classList.add('show');
}

// Î™©Ìëú ÏÇ≠Ï†ú
function deleteGoal(goalId) {
    const goalElement = document.querySelector(`[data-goal-id="${goalId}"]`);
    
    if (goalElement) {
        goalElement.classList.add('deleting');
        setTimeout(() => {
            goalElement.remove();
            showSuccessMessage('Î™©ÌëúÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§');
        }, 300);
    }
    
    closeConfirmModal();
}

// ÏãùÎã® ÏÇ≠Ï†ú ÌôïÏù∏
function confirmDeleteMeal(mealId, mealTitle) {
    const modal = document.getElementById('confirmModal');
    const title = document.getElementById('confirmTitle');
    const message = document.getElementById('confirmMessage');
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    
    title.textContent = 'ÏãùÎã®ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†Ïñ¥Ïöî?';
    message.innerHTML = `<strong>"${mealTitle}"</strong><br>ÏÇ≠Ï†úÎêú Í∏∞Î°ùÏùÄ Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.`;
    
    confirmBtn.onclick = () => deleteMeal(mealId);
    modal.classList.add('show');
}

// ÏãùÎã® ÏÇ≠Ï†ú
function deleteMeal(mealId) {
    // Î™®Îì† ÏãùÏÇ¨ ÌÉÄÏûÖÏóêÏÑú Ìï¥Îãπ IDÏùò ÏãùÎã® Ï∞æÏïÑÏÑú ÏÇ≠Ï†ú
    for (let mealType in mealData) {
        const index = mealData[mealType].findIndex(meal => meal.id === mealId);
        if (index !== -1) {
            mealData[mealType].splice(index, 1);
            break;
        }
    }
    
    // ÌòÑÏû¨ ÌÉ≠ ÏÉàÎ°úÍ≥†Ïπ®
    updateMealRecords(currentMealType);
    showSuccessMessage('ÏãùÎã® Í∏∞Î°ùÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§');
    closeConfirmModal();
}

// ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
function showSuccessMessage(message) {
    const toast = document.createElement('div');
    toast.className = 'success-toast';
    toast.textContent = message;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(-50%) translateY(-20px)';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// ÌôïÏù∏ Î™®Îã¨ Îã´Í∏∞
function closeConfirmModal() {
    document.getElementById('confirmModal').classList.remove('show');
}

// Î™©Ìëú Î™®Îã¨ Í¥ÄÎ†®
function openGoalModal() {
    const modal = document.getElementById('goalModal');
    if (modal) {
        modal.classList.add('show');
        clearGoalForm();
        setTimeout(() => {
            const nameInput = document.getElementById('goalName');
            if (nameInput) nameInput.focus();
        }, 100);
    }
}

function closeGoalModal() {
    const modal = document.getElementById('goalModal');
    if (modal) {
        modal.classList.remove('show');
        clearGoalForm();
    }
}

function clearGoalForm() {
    const elements = {
        goalName: document.getElementById('goalName'),
        goalType: document.getElementById('goalType'),
        goalTarget: document.getElementById('goalTarget'),
        goalUnit: document.getElementById('goalUnit')
    };
    
    if (elements.goalName) elements.goalName.value = '';
    if (elements.goalType) elements.goalType.value = 'daily';
    if (elements.goalTarget) elements.goalTarget.value = '';
    if (elements.goalUnit) elements.goalUnit.value = '';
}

// Î™©Ìëú Ï†ÄÏû•
function saveGoal() {
    const name = document.getElementById('goalName').value.trim();
    const type = document.getElementById('goalType').value;
    const target = document.getElementById('goalTarget').value.trim();
    const unit = document.getElementById('goalUnit').value.trim();
    
    if (!name || !target || !unit) {
        alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    const typeLabels = {
        'daily': 'Ïò§Îäò',
        'weekly': 'Ïù¥Î≤à Ï£º',
        'monthly': 'Ïù¥Î≤à Îã¨'
    };
    
    const colors = ['#EC9787', '#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#FF5722'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    
    const newGoalHtml = `
        <div class="goal-item" data-goal-id="${goalIdCounter}" style="animation: slideInFromRight 0.3s ease;">
            <div class="goal-info">
                <div class="goal-title">${name}</div>
                <div class="goal-progress">${typeLabels[type]}: 0 / ${target}${unit}</div>
            </div>
            <div class="goal-actions">
                <div class="goal-status">
                    <div class="progress-ring">
                        <svg width="50" height="50">
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                            <circle cx="25" cy="25" r="20" fill="none" stroke="${randomColor}" stroke-width="5" 
                                    stroke-dasharray="125.6" stroke-dashoffset="125.6"/>
                        </svg>
                        <div class="progress-text" style="color: ${randomColor}">0%</div>
                    </div>
                </div>
                <button class="delete-btn" onclick="confirmDeleteGoal(${goalIdCounter}, '${name}')">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                </button>
            </div>
        </div>
    `;
    
    const goalsContainer = document.getElementById('goals-container');
    const addButton = document.querySelector('.add-goal-btn');
    
    if (addButton) {
        addButton.insertAdjacentHTML('beforebegin', newGoalHtml);
    } else {
        goalsContainer.insertAdjacentHTML('beforeend', newGoalHtml);
    }
    
    setTimeout(() => {
        const newGoal = document.querySelector(`[data-goal-id="${goalIdCounter}"]`);
        if (newGoal) {
            newGoal.style.animation = '';
        }
    }, 300);
    
    goalIdCounter++;
    showSuccessMessage(`ÏÉàÎ°úÏö¥ Î™©Ìëú "${name}"Í∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!`);
    closeGoalModal();
}

// ÏãùÎã® Î™®Îã¨ Í¥ÄÎ†®
function openMealModal(selectedMealType = null) {
    const modal = document.getElementById('mealModal');
    const mealTimeSelect = document.getElementById('mealTime');
    
    if (selectedMealType) {
        mealTimeSelect.value = selectedMealType;
    } else {
        mealTimeSelect.value = currentMealType;
    }
    
    modal.classList.add('show');
    
    setTimeout(() => {
        const menuInput = document.getElementById('mealMenu');
        if (menuInput) menuInput.focus();
    }, 100);
}

function closeMealModal() {
    document.getElementById('mealModal').classList.remove('show');
    clearMealForm();
}

function clearMealForm() {
    document.getElementById('mealTime').value = 'breakfast';
    document.getElementById('mealMenu').value = '';
    document.getElementById('mealCalories').value = '';
    document.getElementById('mealNote').value = '';
}

// ÏãùÎã® Ï†ÄÏû•
function saveMeal() {
    const time = document.getElementById('mealTime').value;
    const menu = document.getElementById('mealMenu').value.trim();
    const calories = document.getElementById('mealCalories').value.trim();
    const note = document.getElementById('mealNote').value.trim();
    
    if (!menu || !calories) {
        alert('Î©îÎâ¥ÏôÄ ÏπºÎ°úÎ¶¨Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    const timeLabels = {
        'breakfast': 'ÏïÑÏπ®',
        'lunch': 'Ï†êÏã¨',
        'dinner': 'Ï†ÄÎÖÅ',
        'snack': 'Í∞ÑÏãù'
    };
    
    const now = new Date();
    const timeString = now.toLocaleTimeString('ko-KR', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: false
    });
    
    const newMeal = {
        id: `meal-${mealIdCounter}`,
        title: `${timeLabels[time]}: ${menu}`,
        items: menu + (note ? ` (${note})` : ''),
        calories: parseInt(calories),
        time: timeString,
        source: 'manual'
    };
    
    if (!mealData[time]) {
        mealData[time] = [];
    }
    
    mealData[time].push(newMeal);
    mealIdCounter++;
    
    // ÌòÑÏû¨ ÌÉ≠ÏùÑ Ï∂îÍ∞ÄÎêú ÏãùÏÇ¨ ÏãúÍ∞ÑÏúºÎ°ú Î≥ÄÍ≤Ω
    selectMealTab(time);
    
    showSuccessMessage('ÏãùÎã®Ïù¥ Í∏∞Î°ùÎêòÏóàÏäµÎãàÎã§!');
    closeMealModal();
    
    // ÏòÅÏñë Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
    updateNutritionAfterAdd(parseInt(calories));
}

// ÏòÅÏñë Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
function updateNutritionAfterAdd(addedCalories) {
    const calorieElement = document.getElementById('calories-value');
    if (calorieElement) {
        const currentCalories = parseInt(calorieElement.textContent.replace(',', ''));
        const newCalories = currentCalories + addedCalories;
        calorieElement.textContent = newCalories.toLocaleString();
    }
}

// ÏòÅÏñëÏÜå ÏÉÅÏÑ∏ Ï†ïÎ≥¥
function showNutritionDetail(nutrient) {
    const labels = {
        calories: 'ÏπºÎ°úÎ¶¨',
        protein: 'Îã®Î∞±Ïßà', 
        carbs: 'ÌÉÑÏàòÌôîÎ¨º',
        fat: 'ÏßÄÎ∞©'
    };
    
    showSuccessMessage(`${labels[nutrient]} ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï©ÎãàÎã§`);
}

// Ïù∏ÏïÑÏõÉ Ïó∞Îèô - Î™®Îì† ÏãùÏÇ¨ ÏãúÍ∞Ñ ÎåÄÏùë
function syncWithInOut(mealType = 'all') {
    const timeLabels = {
        'breakfast': 'ÏïÑÏπ®',
        'lunch': 'Ï†êÏã¨',
        'dinner': 'Ï†ÄÎÖÅ',
        'snack': 'Í∞ÑÏãù'
    };
    
    // ÌäπÏ†ï ÏãùÏÇ¨ ÏãúÍ∞ÑÏùò Ïó∞Îèô Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî Î∞è Î°úÎî© ÏÉÅÌÉú
    const syncBtn = document.querySelector(`#sync-icon-${mealType}`).parentElement;
    const syncIcon = document.getElementById(`sync-icon-${mealType}`);
    const syncText = document.getElementById(`sync-text-${mealType}`);
    
    syncBtn.disabled = true;
    syncIcon.classList.add('spinning');
    syncText.textContent = `Ïù∏ÏïÑÏõÉÏóêÏÑú ${timeLabels[mealType]} Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Îäî Ï§ë...`;
    
    setTimeout(() => {
        // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä ÏãúÎÆ¨Î†àÏù¥ÏÖò
        const sampleMeals = {
            breakfast: {
                id: `inout-new-breakfast-${Date.now()}`,
                title: 'ÏïÑÏπ®: ÌÜ†Ïä§Ìä∏ + Í≥ÑÎûÄ',
                items: 'ÌÜµÎ∞ÄÌÜ†Ïä§Ìä∏ 2Ïû•, Í≥ÑÎûÄÌõÑÎùºÏù¥ 1Í∞ú, Î≤ÑÌÑ∞',
                calories: 320,
                time: '09:15',
                source: 'inout'
            },
            lunch: {
                id: `inout-new-lunch-${Date.now()}`,
                title: 'Ï†êÏã¨: Î∂àÍ≥†Í∏∞ ÎçÆÎ∞•',
                items: 'Î∂àÍ≥†Í∏∞ 100g, Î∞±ÎØ∏Î∞•, ÏÉÅÏ∂î, ÎãπÍ∑º',
                calories: 580,
                time: '13:00',
                source: 'inout'
            },
            dinner: {
                id: `inout-new-dinner-${Date.now()}`,
                title: 'Ï†ÄÎÖÅ: ÏÉùÏÑ†Íµ¨Ïù¥ Ï†ïÏãù',
                items: 'Í≥†Îì±Ïñ¥Íµ¨Ïù¥ 1ÎßàÎ¶¨, ÌòÑÎØ∏Î∞•, ÏãúÍ∏àÏπòÎÇòÎ¨º',
                calories: 520,
                time: '19:30',
                source: 'inout'
            },
            snack: {
                id: `inout-new-snack-${Date.now()}`,
                title: 'Í∞ÑÏãù: Í≥ºÏùº + Ï∞®',
                items: 'ÏÇ¨Í≥º 1Í∞ú, ÎÖπÏ∞® 1Ïûî',
                calories: 120,
                time: '16:00',
                source: 'inout'
            }
        };
        
        // Ìï¥Îãπ ÏãùÏÇ¨ ÏãúÍ∞ÑÏóê ÏÉà Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä
        if (sampleMeals[mealType]) {
            if (!mealData[mealType]) {
                mealData[mealType] = [];
            }
            mealData[mealType].push(sampleMeals[mealType]);
            
            // ÏòÅÏñë Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            updateNutritionAfterAdd(sampleMeals[mealType].calories);
        }
        
        // Ï†ÑÏ≤¥ ÏòÅÏñë Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
        const updatedNutrition = {
            calories: '1,750',
            protein: '82g',
            carbs: '210g',
            fat: '65g'
        };
        
        document.getElementById('calories-value').textContent = updatedNutrition.calories;
        document.getElementById('protein-value').textContent = updatedNutrition.protein;
        document.getElementById('carbs-value').textContent = updatedNutrition.carbs;
        document.getElementById('fat-value').textContent = updatedNutrition.fat;
        
        // Ïó∞Îèô ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        const syncStatus = document.querySelector('.sync-status');
        if (syncStatus) {
            syncStatus.textContent = `üì± ${new Date().toLocaleTimeString('ko-KR')} ÏóÖÎç∞Ïù¥Ìä∏`;
        }
        
        // ÌòÑÏû¨ ÌÉ≠ ÏÉàÎ°úÍ≥†Ïπ®
        updateMealRecords(currentMealType);
        
        showSuccessMessage(`${timeLabels[mealType]} Ïù∏ÏïÑÏõÉ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ïó∞ÎèôÎêòÏóàÏäµÎãàÎã§! üì±`);
        
        // Î≤ÑÌäº ÏÉÅÌÉú Î≥µÍµ¨
        syncIcon.classList.remove('spinning');
        syncText.textContent = `‚úÖ ${timeLabels[mealType]} Ïó∞Îèô ÏôÑÎ£å - Îã§Ïãú ÎèôÍ∏∞ÌôîÌïòÍ∏∞`;
        syncBtn.disabled = false;
    }, 2000);
}

// Îã®ÏãùÌïòÎü¨ Í∞ÄÍ∏∞
function goToFasting() {
    const button = document.querySelector('.fasting-button');
    button.style.transform = 'scale(0.95)';
    
    setTimeout(() => {
        button.style.transform = '';
        showSuccessMessage('Îã®Ïãù Î™®ÎìúÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§ üö´');
    }, 150);
}

// ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò
function navigateTo(page) {
    switch(page) {
        case 'home':
            showSuccessMessage('Ìôà ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§');
            break;
        case 'health':
            break;
        case 'chatbot':
            showSuccessMessage('Ï±óÎ¥á ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§');
            break;
        default:
            showSuccessMessage(`Ïª§ÎÆ§ÎãàÌã∞ ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§`);
    }
}

// Îí§Î°úÍ∞ÄÍ∏∞
function goBack() {
    window.history.back();
}

// Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
document.addEventListener('click', function(event) {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        if (event.target === modal) {
            modal.classList.remove('show');
            if (modal.id === 'goalModal') clearGoalForm();
            if (modal.id === 'mealModal') clearMealForm();
            if (modal.id === 'diaryModal') clearDiaryForm();
        }
    });
});

// ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
document.addEventListener('DOMContentLoaded', function() {
    console.log('ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å');
    
    // Îã¨ÏÑ±Î•† Í∏∞Î≥∏ ÌëúÏãú
    const calendarContainer = document.getElementById('calendarContainer');
    const achievementContainer = document.getElementById('achievementContainer');
    
    if (calendarContainer) calendarContainer.classList.add('hidden');
    if (achievementContainer) achievementContainer.classList.remove('hidden');
    
    // ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î Ïï†ÎãàÎ©îÏù¥ÏÖò
    setTimeout(() => {
        const progressFill = document.querySelector('.progress-fill');
        if (progressFill) {
            progressFill.style.width = '0%';
            setTimeout(() => {
                progressFill.style.width = '87%';
            }, 100);
        }
    }, 100);
    
    // ÏãùÏÇ¨ ÌÉ≠ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
    const mealTabs = document.querySelectorAll('.meal-tab');
    mealTabs.forEach(tab => {
        tab.addEventListener('click', function(e) {
            e.preventDefault();
            const mealType = this.getAttribute('data-meal-type');
            selectMealTab(mealType);
        });
    });
    
    // Í∏∞Î≥∏ÏúºÎ°ú ÏïÑÏπ® ÌÉ≠ ÏÑ†ÌÉù
    selectMealTab('breakfast');
});
</script>
</body>
</html>