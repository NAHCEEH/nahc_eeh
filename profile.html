<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë‚´ ê±´ê°• ê´€ë¦¬</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #F2E9E0;
    min-height: 100vh;
    color: #5a4a3a;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 390px;
    margin: 0 auto;
    background: #F2E9E0;
    min-height: 100vh;
    position: relative;
}

/* í—¤ë” */
.header {
    background: transparent;
    padding: 20px;
    color: #5a4a3a;
    position: relative;
    text-align: center;
}

.back-btn {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #5a4a3a;
    font-size: 24px;
    cursor: pointer;
}

.header-title {
    font-size: 18px;
    font-weight: bold;
}

/* ë©”ì¸ ì»¨í…ì¸  */
.content {
    padding: 20px 0;
    padding-bottom: 100px;
}

/* ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
.section {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 25px;
    padding: 20px;
    margin: 0 20px 20px 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.section-title {
    font-size: 16px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.calendar-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background-color 0.3s ease;
    color: #5a4a3a;
}

.calendar-toggle:hover {
    background: rgba(255, 255, 255, 0.5);
}

.calendar-toggle svg {
    width: 24px;
    height: 24px;
}

/* ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ */
.calendar-container {
    background: rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
    animation: slideDown 0.3s ease;
}

.calendar-container.hidden {
    display: none;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.calendar-date {
    font-size: 18px;
    font-weight: bold;
    color: #5a4a3a;
}

.calendar-subtitle {
    font-size: 12px;
    color: #EC9787;
    margin-top: 2px;
}

.calendar-nav {
    display: flex;
    gap: 10px;
}

.nav-arrow {
    background: none;
    border: none;
    color: #5a4a3a;
    font-size: 18px;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 10px;
    transition: background-color 0.3s ease;
}

.nav-arrow:hover {
    background: rgba(255, 255, 255, 0.5);
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
}

.calendar-day-header {
    text-align: center;
    font-size: 12px;
    color: #666;
    font-weight: bold;
    padding: 8px 0;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    color: #5a4a3a;
}

.calendar-day:hover {
    background: rgba(236, 151, 135, 0.2);
}

.calendar-day.today {
    background: #EC9787;
    color: white;
    font-weight: bold;
}

.calendar-day.completed {
    background: #4CAF50;
    color: white;
}

.calendar-day.partial {
    background: #FF9800;
    color: white;
}

.calendar-day.missed {
    background: #f44336;
    color: white;
}

.calendar-day.other-month {
    color: #ccc;
}

/* ë‹¬ì„±ë¥  ì„¹ì…˜ */
.achievement-container {
    animation: slideDown 0.3s ease;
}

.achievement-container.hidden {
    display: none;
}

.achievement-card {
    background: rgba(255, 255, 255, 0.5);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
}

.achievement-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.achievement-label {
    font-size: 14px;
    color: #5a4a3a;
}

.achievement-percentage {
    font-size: 20px;
    font-weight: bold;
    color: #5a4a3a;
}

/* ìƒˆë¡œìš´ ì§„í–‰ ë°” ìŠ¤íƒ€ì¼ */
.progress-container {
    position: relative;
    background: rgba(255, 255, 255, 0.5);
    height: 12px;
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progress-fill {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background: #EC9787;
    border-radius: 20px;
    transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
    margin-top: 8px;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, transparent 50%);
    border-radius: 15px;
}

.progress-text {
    position: relative;
    z-index: 1;
    color: white;
    font-weight: bold;
    font-size: 16px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.achievement-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 25px;
}

.stat-item {
    text-align: center;
    padding: 15px 10px;
    background: rgba(217, 188, 154, 0.3);
    border-radius: 15px;
    transition: transform 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-2px);
}

.stat-value {
    font-size: 18px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 3px;
}

.stat-label {
    font-size: 11px;
    color: #666;
}

/* ìƒˆë¡œìš´ ëª©í‘œ ì¶”ê°€ ì• ë‹ˆë©”ì´ì…˜ */
@keyframes slideInFromRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ëª©í‘œ ì„¹ì…˜ ê°œì„  */
#goals-container {
    position: relative;
}

.goal-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    margin-bottom: 10px;
    border: 1px solid rgba(236, 151, 135, 0.2);
    position: relative;
    transition: all 0.3s ease;
}

.goal-item:hover {
    transform: translateX(5px);
}

.goal-info {
    flex: 1;
}

.goal-title {
    font-weight: bold;
    margin-bottom: 5px;
}

.goal-progress {
    font-size: 12px;
    color: #666;
}

.goal-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.goal-status {
    width: 60px;
    text-align: center;
}

.progress-ring {
    width: 50px;
    height: 50px;
    position: relative;
}

.progress-ring svg {
    transform: rotate(-90deg);
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 12px;
    font-weight: bold;
    color: #4CAF50;
}

/* ì‚­ì œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.delete-btn {
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
    opacity: 0.7;
}

.delete-btn:hover {
    background: rgba(255, 107, 107, 0.1);
    opacity: 1;
    transform: scale(1.1);
}

.delete-btn svg {
    width: 20px;
    height: 20px;
}

.add-goal-btn {
    width: 100%;
    padding: 12px;
    background: rgba(217, 188, 154, 0.5);
    color: #5a4a3a;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px;
    transition: all 0.3s ease;
}

.add-goal-btn:hover {
    background: rgba(217, 188, 154, 0.7);
    transform: translateY(-2px);
}

/* ì‹ë‹¨ ê¸°ë¡ ì„¹ì…˜ */
.meal-time-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.meal-tab {
    flex: 1;
    padding: 10px;
    background: #f5f5f5;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
}

.meal-tab.active {
    background: #EC9787;
    color: white;
}

.meal-record {
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 10px;
    border: 1px solid rgba(236, 151, 135, 0.2);
    position: relative;
    transition: all 0.3s ease;
}

.meal-record:hover {
    transform: translateX(5px);
}

.meal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.meal-title {
    font-weight: bold;
    color: #EC9787;
}

.meal-calories {
    font-size: 14px;
    color: #EC9787;
    font-weight: bold;
}

.meal-items {
    font-size: 14px;
    color: #666;
    line-height: 1.6;
    margin-bottom: 8px;
}

.meal-time {
    font-size: 12px;
    color: #999;
    margin-top: 5px;
}

.meal-delete-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    opacity: 0;
    transition: all 0.3s ease;
}

.meal-record:hover .meal-delete-btn {
    opacity: 0.7;
}

.meal-delete-btn:hover {
    background: rgba(255, 107, 107, 0.1);
    opacity: 1;
    transform: scale(1.1);
}

.meal-delete-btn svg {
    width: 16px;
    height: 16px;
}

.add-meal-btn {
    width: 100%;
    padding: 12px;
    background: rgba(217, 188, 154, 0.5);
    border: none;
    border-radius: 20px;
    color: #5a4a3a;
    font-weight: bold;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.add-meal-btn:hover {
    background: rgba(217, 188, 154, 0.7);
}

/* ì˜ì–‘ ìš”ì•½ ì¹´ë“œ */
.nutrition-summary {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-top: 15px;
}

.nutrition-card {
    background: rgba(236, 151, 135, 0.05);
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    border: 1px solid rgba(236, 151, 135, 0.2);
}

.nutrition-icon {
    font-size: 24px;
    margin-bottom: 5px;
}

.nutrition-value {
    font-size: 20px;
    font-weight: bold;
    color: #EC9787;
}

.nutrition-label {
    font-size: 12px;
    color: #666;
    margin-top: 3px;
}

/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 390px;
    background: white;
    border-top: 1px solid #eee;
    display: flex;
    padding: 15px 0;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
}

.nav-item {
    flex: 1;
    text-align: center;
    padding: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 10px;
    margin: 0 5px;
}

.nav-item:hover {
    background: #faf8f6;
    transform: translateY(-2px);
}

.nav-item.active {
    background: #EC9787;
    color: white;
}

.nav-icon {
    font-size: 24px;
    margin-bottom: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.nav-label {
    font-size: 12px;
    font-weight: 500;
}

/* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: #F2E9E0;
    border-radius: 25px;
    padding: 30px;
    width: 90%;
    max-width: 350px;
    max-height: 80vh;
    overflow-y: auto;
    animation: modalSlideIn 0.3s ease;
}

/* í™•ì¸ ëª¨ë‹¬ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
.confirm-modal-content {
    text-align: center;
    padding: 40px 30px;
}

.confirm-icon {
    font-size: 48px;
    color: #ff6b6b;
    margin-bottom: 20px;
}

.confirm-title {
    font-size: 20px;
    font-weight: bold;
    color: #5a4a3a;
    margin-bottom: 15px;
}

.confirm-message {
    font-size: 14px;
    color: #666;
    margin-bottom: 30px;
    line-height: 1.5;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    text-align: center;
    margin-bottom: 25px;
}

.modal-title {
    font-size: 20px;
    font-weight: bold;
    color: #8b6f47;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    font-weight: bold;
    margin-bottom: 8px;
    color: #8b6f47;
}

.text-input {
    width: 100%;
    padding: 12px;
    border: 2px solid #e9bf94;
    border-radius: 10px;
    font-size: 16px;
}

.text-input:focus {
    outline: none;
    border-color: #d4a574;
    box-shadow: 0 0 10px rgba(212, 165, 116, 0.3);
}

.input-hint {
    font-size: 11px;
    color: #999;
    margin-top: 5px;
}

.text-input.error {
    border-color: #ff6b6b;
    box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.2);
}

.error-message {
    color: #ff6b6b;
    font-size: 12px;
    margin-top: 5px;
    display: none;
}

textarea.text-input {
    resize: vertical;
    min-height: 100px;
}

.modal-footer {
    display: flex;
    gap: 10px;
    margin-top: 25px;
}

.btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background: #f5f5f5;
    color: #666;
}

.btn-save {
    background: #EC9787;
    color: white;
}

.btn-delete {
    background: #ff6b6b;
    color: white;
}

.btn-save:hover {
    background: #E58775;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(236, 151, 135, 0.4);
}

.btn-delete:hover {
    background: #ff5252;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
}

/* ì‚­ì œ ì• ë‹ˆë©”ì´ì…˜ */
.deleting {
    animation: slideOut 0.3s ease forwards;
}

@keyframes slideOut {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(-100%);
    }
}
</style>
</head>
<body>
<div class="container">
<!-- í—¤ë” -->
<header class="header">
    <button class="back-btn" onclick="goBack()">â—€</button>
    <h1 class="header-title">ë‚´ ê±´ê°• ê´€ë¦¬</h1>
</header>

<!-- ë©”ì¸ ì»¨í…ì¸  -->
<div class="content">
    <!-- ë³µìš© ë‹¬ì„±ë¥  ì„¹ì…˜ -->
    <section class="section">
        <h2 class="section-title">
            ë³µìš© ë‹¬ì„±ë¥ 
            <button class="calendar-toggle" onclick="toggleCalendar()">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                </svg>
            </button>
        </h2>
        
        <!-- ìº˜ë¦°ë” -->
        <div id="calendarContainer" class="calendar-container hidden">
            <div class="calendar-header">
                <div>
                    <div class="calendar-date">2025.07.14.ì›”ìš”ì¼</div>
                    <div class="calendar-subtitle">2ì¼ ì—°ì† ë³µìš© ì„±ê³µì¤‘</div>
                </div>
                <div class="calendar-nav">
                    <button class="nav-arrow" onclick="changeMonth(-1)">â€¹</button>
                    <button class="nav-arrow" onclick="changeMonth(1)">â€º</button>
                </div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-day-header">ì¼</div>
                <div class="calendar-day-header">ì›”</div>
                <div class="calendar-day-header">í™”</div>
                <div class="calendar-day-header">ìˆ˜</div>
                <div class="calendar-day-header">ëª©</div>
                <div class="calendar-day-header">ê¸ˆ</div>
                <div class="calendar-day-header">í† </div>
                
                <!-- ì´ì „ ë‹¬ ë§ì¼ë“¤ -->
                <div class="calendar-day other-month">29</div>
                <div class="calendar-day other-month">30</div>
                
                <!-- 7ì›” -->
                <div class="calendar-day completed">1</div>
                <div class="calendar-day completed">2</div>
                <div class="calendar-day partial">3</div>
                <div class="calendar-day completed">4</div>
                <div class="calendar-day completed">5</div>
                
                <div class="calendar-day completed">6</div>
                <div class="calendar-day missed">7</div>
                <div class="calendar-day completed">8</div>
                <div class="calendar-day partial">9</div>
                <div class="calendar-day completed">10</div>
                <div class="calendar-day completed">11</div>
                <div class="calendar-day completed">12</div>
                
                <div class="calendar-day completed">13</div>
                <div class="calendar-day today">14</div>
                <div class="calendar-day">15</div>
                <div class="calendar-day">16</div>
                <div class="calendar-day">17</div>
                <div class="calendar-day">18</div>
                <div class="calendar-day">19</div>
                
                <div class="calendar-day">20</div>
                <div class="calendar-day">21</div>
                <div class="calendar-day">22</div>
                <div class="calendar-day">23</div>
                <div class="calendar-day">24</div>
                <div class="calendar-day">25</div>
                <div class="calendar-day">26</div>
                
                <div class="calendar-day">27</div>
                <div class="calendar-day">28</div>
                <div class="calendar-day">29</div>
                <div class="calendar-day">30</div>
                <div class="calendar-day">31</div>
                
                <!-- ë‹¤ìŒ ë‹¬ ì²«ë‚ ë“¤ -->
                <div class="calendar-day other-month">1</div>
                <div class="calendar-day other-month">2</div>
            </div>
        </div>
        
        <!-- ë‹¬ì„±ë¥  ìƒì„¸ ì •ë³´ -->
        <div id="achievementContainer" class="achievement-container">
            <div class="achievement-card">
                <div class="achievement-header">
                    <div class="achievement-label">ì´ë²ˆ ì£¼ í‰ê·  ë‹¬ì„±ë¥ </div>
                    <div class="achievement-percentage">87%</div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-fill" style="width: 87%"></div>
                </div>
                <div class="progress-info">
                    <span>ë³µìš©ì™„ë£Œ: 22ê°œ</span>
                    <span>ì „ì²´: 25ê°œ</span>
                </div>
                
                <div class="achievement-stats" style="margin-top: 20px;">
                    <div class="stat-item">
                        <div class="stat-value">22ì¼</div>
                        <div class="stat-label">ì´ë²ˆ ë‹¬ ë³µìš©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">5ì¼</div>
                        <div class="stat-label">ì—°ì† ì¼ìˆ˜</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">156ê°œ</div>
                        <div class="stat-label">ì´ ë³µìš© ê°œìˆ˜</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- ë‚´ê°€ ì„¤ì •í•œ ëª©í‘œ ì„¹ì…˜ -->
    <section class="section">
        <h2 class="section-title">
            ë‚´ê°€ ì„¤ì •í•œ ëª©í‘œ
        </h2>
        
        <div id="goals-container">
            <div class="goal-item" data-goal-id="1">
                <div class="goal-info">
                    <div class="goal-title">ë§¤ì¼ ì˜ì–‘ì œ 100% ë³µìš©í•˜ê¸°</div>
                    <div class="goal-progress">ì´ë²ˆ ë‹¬: 22ì¼ / 30ì¼</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#EC9787" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="31.4"/>
                            </svg>
                            <div class="progress-text" style="color: #EC9787">73%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(1, 'ë§¤ì¼ ì˜ì–‘ì œ 100% ë³µìš©í•˜ê¸°')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="goal-item" data-goal-id="2">
                <div class="goal-info">
                    <div class="goal-title">í•˜ë£¨ 2L ì´ìƒ ë¬¼ ë§ˆì‹œê¸°</div>
                    <div class="goal-progress">ì˜¤ëŠ˜: 1.5L / 2L</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#2196F3" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="31.4"/>
                            </svg>
                            <div class="progress-text" style="color: #2196F3">75%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(2, 'í•˜ë£¨ 2L ì´ìƒ ë¬¼ ë§ˆì‹œê¸°')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="goal-item" data-goal-id="3">
                <div class="goal-info">
                    <div class="goal-title">ì£¼ 3íšŒ ì´ìƒ ìš´ë™í•˜ê¸°</div>
                    <div class="goal-progress">ì´ë²ˆ ì£¼: 2íšŒ / 3íšŒ</div>
                </div>
                <div class="goal-actions">
                    <div class="goal-status">
                        <div class="progress-ring">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#FF9800" stroke-width="5" 
                                        stroke-dasharray="125.6" stroke-dashoffset="42"/>
                            </svg>
                            <div class="progress-text" style="color: #FF9800">67%</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="confirmDeleteGoal(3, 'ì£¼ 3íšŒ ì´ìƒ ìš´ë™í•˜ê¸°')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <button class="add-goal-btn" onclick="openGoalModal()">
            + ìƒˆë¡œìš´ ëª©í‘œ ì¶”ê°€
        </button>
    </section>
    
    <!-- ì‹ë‹¨ ê¸°ë¡ ì„¹ì…˜ -->
    <section class="section">
        <h2 class="section-title">
            ì˜¤ëŠ˜ì˜ ì‹ë‹¨ ê¸°ë¡
        </h2>
        
        <div class="meal-time-tabs">
            <button class="meal-tab active" onclick="selectMealTime('breakfast')">ì•„ì¹¨</button>
            <button class="meal-tab" onclick="selectMealTime('lunch')">ì ì‹¬</button>
            <button class="meal-tab" onclick="selectMealTime('dinner')">ì €ë…</button>
            <button class="meal-tab" onclick="selectMealTime('snack')">ê°„ì‹</button>
        </div>
        
        <div id="meal-records">
            <div class="meal-record" data-meal-id="1">
                <button class="meal-delete-btn" onclick="confirmDeleteMeal(1, 'ì•„ì¹¨ ì‹ì‚¬')">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                </button>
                <div class="meal-header">
                    <span class="meal-title">ì•„ì¹¨ ì‹ì‚¬</span>
                    <span class="meal-calories">380 kcal</span>
                </div>
                <div class="meal-items">
                    í˜„ë¯¸ë°¥ 1ê³µê¸°, ëœì¥ì°Œê°œ, ê³„ë€í›„ë¼ì´ 2ê°œ, ê¹€ì¹˜
                </div>
                <div class="meal-time">ì˜¤ì „ 8:30</div>
            </div>
            
            <button class="add-meal-btn" onclick="openMealModal()">
                + ì‹ë‹¨ ì¶”ê°€í•˜ê¸°
            </button>
        </div>
        
        <!-- ì˜ì–‘ ìš”ì•½ -->
        <div class="nutrition-summary">
            <div class="nutrition-card">
                <div class="nutrition-icon">ğŸ”¥</div>
                <div class="nutrition-value">1,520</div>
                <div class="nutrition-label">ì¹¼ë¡œë¦¬</div>
            </div>
            <div class="nutrition-card">
                <div class="nutrition-icon">ğŸ¥©</div>
                <div class="nutrition-value">68g</div>
                <div class="nutrition-label">ë‹¨ë°±ì§ˆ</div>
            </div>
            <div class="nutrition-card">
                <div class="nutrition-icon">ğŸŒ¾</div>
                <div class="nutrition-value">186g</div>
                <div class="nutrition-label">íƒ„ìˆ˜í™”ë¬¼</div>
            </div>
            <div class="nutrition-card">
                <div class="nutrition-icon">ğŸ¥‘</div>
                <div class="nutrition-value">52g</div>
                <div class="nutrition-label">ì§€ë°©</div>
            </div>
        </div>
    </section>
</div>

<!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
<nav class="bottom-nav">
    <div class="nav-item" onclick="navigateTo('community')">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                <circle cx="18.5" cy="10" r="2.5"/>
                <circle cx="5.5" cy="10" r="2.5"/>
                <path d="M18.5 12.5c-1.33 0-4 0.67-4 2v1.5h8V14.5c0-1.33-2.67-2-4-2z"/>
                <path d="M5.5 12.5c-1.33 0-4 0.67-4 2v1.5h8V14.5c0-1.33-2.67-2-4-2z"/>
            </svg>
        </div>
        <div class="nav-label">ì»¤ë®¤ë‹ˆí‹°</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('home')">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
        </div>
        <div class="nav-label">í™ˆ</div>
    </div>
    
    <div class="nav-item active" onclick="navigateTo('health')">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
        </div>
        <div class="nav-label">ë‚´ ê±´ê°•</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('chatbot')">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 512 512" fill="currentColor">
                <!-- ë©”ì¸ ì–¼êµ´ -->
                <rect x="130" y="180" width="252" height="200" rx="60" fill="currentColor"/>
                <!-- ì™¼ìª½ ê·€ -->
                <ellipse cx="160" cy="160" rx="35" ry="45" fill="currentColor"/>
                <!-- ì˜¤ë¥¸ìª½ ê·€ -->
                <ellipse cx="350" cy="160" rx="35" ry="45" fill="currentColor"/>
                <!-- ì‘ì€ í•˜íŠ¸ -->
                <path d="M256 120 C250 110, 240 110, 240 120 C240 110, 230 110, 230 120 C230 130, 240 140, 256 150 C270 140, 280 130, 280 120 C280 110, 270 110, 270 120 C270 110, 260 110, 256 120 Z" fill="#ffb3ba"/>
                <!-- ì™¼ìª½ ëˆˆ -->
                <circle cx="190" cy="240" r="18" fill="white"/>
                <circle cx="190" cy="235" r="7" fill="currentColor"/>
                <!-- ì˜¤ë¥¸ìª½ ëˆˆ -->
                <circle cx="320" cy="240" r="18" fill="white"/>
                <circle cx="320" cy="235" r="7" fill="currentColor"/>
                <!-- ì… (ë‘ ê°œì˜ ë‘¥ê·¼ ì‚¬ê°í˜•) -->
                <rect x="200" y="310" width="45" height="30" rx="15" fill="white"/>
                <rect x="265" y="310" width="45" height="30" rx="15" fill="white"/>
                <line x1="255" y1="310" x2="255" y2="340" stroke="currentColor" stroke-width="5"/>
            </svg>
        </div>
        <div class="nav-label">ì±—ë´‡</div>
    </div>
    
    <div class="nav-item" onclick="navigateTo('more')">
        <div class="nav-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="5" cy="12" r="2"/>
                <circle cx="12" cy="12" r="2"/>
                <circle cx="19" cy="12" r="2"/>
            </svg>
        </div>
        <div class="nav-label">ë”ë³´ê¸°</div>
    </div>
</nav>

<!-- ëª©í‘œ ì¶”ê°€ ëª¨ë‹¬ -->
<div id="goalModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ìƒˆë¡œìš´ ëª©í‘œ ì¶”ê°€</h2>
        </div>
        
        <div class="form-group">
            <label class="form-label">ëª©í‘œ ì´ë¦„ *</label>
            <input type="text" class="text-input" id="goalName" placeholder="ì˜ˆ: ë§¤ì¼ 30ë¶„ ìš´ë™í•˜ê¸°" maxlength="50">
            <div class="input-hint">ìµœëŒ€ 50ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">ëª©í‘œ ìœ í˜• *</label>
            <select class="text-input" id="goalType">
                <option value="daily">ë§¤ì¼</option>
                <option value="weekly">ì£¼ê°„</option>
                <option value="monthly">ì›”ê°„</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">ëª©í‘œ ìˆ˜ì¹˜ *</label>
            <input type="number" class="text-input" id="goalTarget" placeholder="ì˜ˆ: 30" min="1" max="9999">
            <div class="input-hint">1~9999 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">ë‹¨ìœ„ *</label>
            <input type="text" class="text-input" id="goalUnit" placeholder="ì˜ˆ: ë¶„, íšŒ, km, ì”" maxlength="10">
            <div class="input-hint">ìµœëŒ€ 10ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤</div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeGoalModal()">ì·¨ì†Œ</button>
            <button class="btn btn-save" onclick="saveGoal()">ì €ì¥</button>
        </div>
    </div>
</div>

<!-- ì‹ë‹¨ ì¶”ê°€ ëª¨ë‹¬ -->
<div id="mealModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ì‹ë‹¨ ì¶”ê°€</h2>
        </div>
        
        <div class="form-group">
            <label class="form-label">ì‹ì‚¬ ì‹œê°„</label>
            <select class="text-input" id="mealTime">
                <option value="breakfast">ì•„ì¹¨</option>
                <option value="lunch">ì ì‹¬</option>
                <option value="dinner">ì €ë…</option>
                <option value="snack">ê°„ì‹</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">ë©”ë‰´</label>
            <textarea class="text-input" id="mealMenu" placeholder="ë¨¹ì€ ìŒì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">ì˜ˆìƒ ì¹¼ë¡œë¦¬</label>
            <input type="number" class="text-input" id="mealCalories" placeholder="ì˜ˆ: 500">
        </div>
        
        <div class="form-group">
            <label class="form-label">ë©”ëª¨</label>
            <input type="text" class="text-input" id="mealNote" placeholder="ì˜ˆ: í¬ë§Œê° ì¢‹ìŒ, ì†Œí™” ì˜ë¨">
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeMealModal()">ì·¨ì†Œ</button>
            <button class="btn btn-save" onclick="saveMeal()">ì €ì¥</button>
        </div>
    </div>
</div>

<!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
<div id="confirmModal" class="modal">
    <div class="modal-content confirm-modal-content">
        <div class="confirm-icon">ğŸ—‘ï¸</div>
        <div class="confirm-title" id="confirmTitle">ì •ë§ ì‚­ì œí•˜ì‹œê² ì–´ìš”?</div>
        <div class="confirm-message" id="confirmMessage">ì‚­ì œëœ í•­ëª©ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
        
        <div class="modal-footer">
            <button class="btn btn-cancel" onclick="closeConfirmModal()">ì·¨ì†Œ</button>
            <button class="btn btn-delete" id="confirmDeleteBtn">ì‚­ì œ</button>
        </div>
    </div>
</div>
</div>

<script>
let calendarVisible = false;
let currentMonth = 7; // 7ì›”
let currentYear = 2025;
let goalIdCounter = 4; // ë‹¤ìŒ ëª©í‘œ ID
let mealIdCounter = 2; // ë‹¤ìŒ ì‹ë‹¨ ID

// ìº˜ë¦°ë”/ë‹¬ì„±ë¥  í† ê¸€ ê¸°ëŠ¥
function toggleCalendar() {
    const calendarContainer = document.getElementById('calendarContainer');
    const achievementContainer = document.getElementById('achievementContainer');
    
    calendarVisible = !calendarVisible;
    
    if (calendarVisible) {
        calendarContainer.classList.remove('hidden');
        achievementContainer.classList.add('hidden');
    } else {
        calendarContainer.classList.add('hidden');
        achievementContainer.classList.remove('hidden');
        
        // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜
        setTimeout(() => {
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = '0%';
                setTimeout(() => {
                    progressFill.style.width = '87%';
                }, 100);
            }
        }, 100);
    }
}

// ì›” ë³€ê²½ ê¸°ëŠ¥
function changeMonth(direction) {
    currentMonth += direction;
    
    if (currentMonth > 12) {
        currentMonth = 1;
        currentYear++;
    } else if (currentMonth < 1) {
        currentMonth = 12;
        currentYear--;
    }
    
    updateCalendar();
}

// ìº˜ë¦°ë” ì—…ë°ì´íŠ¸
function updateCalendar() {
    const monthNames = ['', '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];
    const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
    
    // ë‚ ì§œ í—¤ë” ì—…ë°ì´íŠ¸
    const today = new Date();
    const currentDate = new Date(currentYear, currentMonth - 1, today.getDate());
    const dayOfWeek = dayNames[currentDate.getDay()];
    
    document.querySelector('.calendar-date').textContent = 
        `${currentYear}.${String(currentMonth).padStart(2, '0')}.${String(today.getDate()).padStart(2, '0')}.${dayOfWeek}`;
    
    console.log(`ìº˜ë¦°ë” ì—…ë°ì´íŠ¸: ${currentYear}ë…„ ${monthNames[currentMonth]}`);
}

// ì‹ì‚¬ ì‹œê°„ ì„ íƒ
function selectMealTime(time) {
    document.querySelectorAll('.meal-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // ì„ íƒëœ ì‹œê°„ëŒ€ì˜ ì‹ë‹¨ í‘œì‹œ
    updateMealRecords(time);
}

// ì‹ë‹¨ ê¸°ë¡ ì—…ë°ì´íŠ¸
function updateMealRecords(time) {
    const mealData = {
        breakfast: {
            records: [
                {
                    id: 1,
                    title: 'ì•„ì¹¨ ì‹ì‚¬',
                    items: 'í˜„ë¯¸ë°¥ 1ê³µê¸°, ëœì¥ì°Œê°œ, ê³„ë€í›„ë¼ì´ 2ê°œ, ê¹€ì¹˜',
                    calories: 380,
                    time: 'ì˜¤ì „ 8:30'
                }
            ]
        },
        lunch: {
            records: [
                {
                    id: 2,
                    title: 'ì ì‹¬ ì‹ì‚¬',
                    items: 'ì œìœ¡ë³¶ìŒ ì •ì‹, ëœì¥ì°Œê°œ, ìƒì¶”ìŒˆ',
                    calories: 650,
                    time: 'ì˜¤í›„ 12:30'
                }
            ]
        },
        dinner: {
            records: []
        },
        snack: {
            records: [
                {
                    id: 3,
                    title: 'ì˜¤í›„ ê°„ì‹',
                    items: 'ì•„ë©”ë¦¬ì¹´ë…¸, ì´ˆì½”ì¹© ì¿ í‚¤ 2ê°œ',
                    calories: 180,
                    time: 'ì˜¤í›„ 3:00'
                }
            ]
        }
    };
    
    const records = mealData[time].records;
    const recordsContainer = document.getElementById('meal-records');
    
    let html = '';
    if (records.length > 0) {
        records.forEach(record => {
            html += `
                <div class="meal-record" data-meal-id="${record.id}">
                    <button class="meal-delete-btn" onclick="confirmDeleteMeal(${record.id}, '${record.title}')">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                    <div class="meal-header">
                        <span class="meal-title">${record.title}</span>
                        <span class="meal-calories">${record.calories} kcal</span>
                    </div>
                    <div class="meal-items">${record.items}</div>
                    <div class="meal-time">${record.time}</div>
                </div>
            `;
        });
    }
    
    html += `<button class="add-meal-btn" onclick="openMealModal()">+ ì‹ë‹¨ ì¶”ê°€í•˜ê¸°</button>`;
    recordsContainer.innerHTML = html;
}

// ëª©í‘œ ì‚­ì œ í™•ì¸
function confirmDeleteGoal(goalId, goalName) {
    const modal = document.getElementById('confirmModal');
    const title = document.getElementById('confirmTitle');
    const message = document.getElementById('confirmMessage');
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    
    title.textContent = 'ëª©í‘œë¥¼ ì‚­ì œí•˜ì‹œê² ì–´ìš”?';
    message.innerHTML = `<strong>"${goalName}"</strong><br>ì‚­ì œëœ ëª©í‘œëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
    
    confirmBtn.onclick = () => deleteGoal(goalId);
    modal.classList.add('show');
}

// ëª©í‘œ ì‚­ì œ ì‹¤í–‰
function deleteGoal(goalId) {
    const goalElement = document.querySelector(`[data-goal-id="${goalId}"]`);
    
    if (goalElement) {
        // ì‚­ì œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
        goalElement.classList.add('deleting');
        
        // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ìš”ì†Œ ì œê±°
        setTimeout(() => {
            goalElement.remove();
            showSuccessMessage('ëª©í‘œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
        }, 300);
    }
    
    closeConfirmModal();
}

// ì‹ë‹¨ ì‚­ì œ í™•ì¸
function confirmDeleteMeal(mealId, mealTitle) {
    const modal = document.getElementById('confirmModal');
    const title = document.getElementById('confirmTitle');
    const message = document.getElementById('confirmMessage');
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    
    title.textContent = 'ì‹ë‹¨ì„ ì‚­ì œí•˜ì‹œê² ì–´ìš”?';
    message.innerHTML = `<strong>"${mealTitle}"</strong><br>ì‚­ì œëœ ê¸°ë¡ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
    
    confirmBtn.onclick = () => deleteMeal(mealId);
    modal.classList.add('show');
}

// ì‹ë‹¨ ì‚­ì œ ì‹¤í–‰
function deleteMeal(mealId) {
    const mealElement = document.querySelector(`[data-meal-id="${mealId}"]`);
    
    if (mealElement) {
        // ì‚­ì œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
        mealElement.classList.add('deleting');
        
        // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ìš”ì†Œ ì œê±°
        setTimeout(() => {
            mealElement.remove();
            showSuccessMessage('ì‹ë‹¨ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
            
            // ì˜ì–‘ ì •ë³´ ì—…ë°ì´íŠ¸ (ì‹¤ì œ ì•±ì—ì„œëŠ” ê³„ì‚° ë¡œì§ í•„ìš”)
            updateNutritionSummary();
        }, 300);
    }
    
    closeConfirmModal();
}

// ì˜ì–‘ ì •ë³´ ì—…ë°ì´íŠ¸ (ì˜ˆì‹œ)
function updateNutritionSummary() {
    // ì‹¤ì œ ì•±ì—ì„œëŠ” ë‚¨ì€ ì‹ë‹¨ë“¤ì˜ ì¹¼ë¡œë¦¬ë¥¼ ê³„ì‚°í•´ì„œ ì—…ë°ì´íŠ¸
    const nutritionCards = document.querySelectorAll('.nutrition-value');
    
    // ì˜ˆì‹œ: ì¹¼ë¡œë¦¬ ê°ì†Œ
    if (nutritionCards[0]) {
        nutritionCards[0].textContent = '1,140'; // 380 ì¹¼ë¡œë¦¬ ê°ì†Œ
    }
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    // ê°„ë‹¨í•œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ (ì‹¤ì œ ì•±ì—ì„œëŠ” ë” ì˜ˆìœ ë””ìì¸ ì ìš©)
    const toast = document.createElement('div');
    toast.style.cssText = `
        position: fixed;
        top: 100px;
        left: 50%;
        transform: translateX(-50%);
        background: #4CAF50;
        color: white;
        padding: 12px 24px;
        border-radius: 25px;
        z-index: 10000;
        font-size: 14px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideDown 0.3s ease;
    `;
    toast.textContent = message;
    
    document.body.appendChild(toast);
    
    // 3ì´ˆ í›„ ì œê±°
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(-50%) translateY(-20px)';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// í™•ì¸ ëª¨ë‹¬ ë‹«ê¸°
function closeConfirmModal() {
    document.getElementById('confirmModal').classList.remove('show');
}

// ëª©í‘œ ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
function openGoalModal() {
    const modal = document.getElementById('goalModal');
    if (modal) {
        modal.classList.add('show');
        // í¼ ì´ˆê¸°í™”
        clearGoalForm();
        // ì²« ë²ˆì§¸ ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
        setTimeout(() => {
            const nameInput = document.getElementById('goalName');
            if (nameInput) nameInput.focus();
        }, 100);
    } else {
        console.error('ëª©í‘œ ëª¨ë‹¬ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
}

function closeGoalModal() {
    const modal = document.getElementById('goalModal');
    if (modal) {
        modal.classList.remove('show');
        clearGoalForm();
    }
}

// ëª©í‘œ í¼ ì´ˆê¸°í™”
function clearGoalForm() {
    const elements = {
        goalName: document.getElementById('goalName'),
        goalType: document.getElementById('goalType'),
        goalTarget: document.getElementById('goalTarget'),
        goalUnit: document.getElementById('goalUnit')
    };
    
    // ê° ìš”ì†Œê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ í›„ ì´ˆê¸°í™”
    if (elements.goalName) elements.goalName.value = '';
    if (elements.goalType) elements.goalType.value = 'daily';
    if (elements.goalTarget) elements.goalTarget.value = '';
    if (elements.goalUnit) elements.goalUnit.value = '';
    
    // ì—ëŸ¬ ìŠ¤íƒ€ì¼ ì œê±° (ìˆëŠ” ê²½ìš°)
    Object.values(elements).forEach(element => {
        if (element) {
            element.classList.remove('error');
            element.style.borderColor = '';
        }
    });
}

// ì‹ë‹¨ ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
function openMealModal() {
    document.getElementById('mealModal').classList.add('show');
}

function closeMealModal() {
    document.getElementById('mealModal').classList.remove('show');
    clearMealForm();
}

// ì‹ë‹¨ í¼ ì´ˆê¸°í™”
function clearMealForm() {
    document.getElementById('mealTime').value = 'breakfast';
    document.getElementById('mealMenu').value = '';
    document.getElementById('mealCalories').value = '';
    document.getElementById('mealNote').value = '';
}

// ëª©í‘œ ì €ì¥
function saveGoal() {
    const name = document.getElementById('goalName').value.trim();
    const type = document.getElementById('goalType').value;
    const target = document.getElementById('goalTarget').value.trim();
    const unit = document.getElementById('goalUnit').value.trim();
    
    if (!name || !target || !unit) {
        alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    // ëª©í‘œ ìœ í˜•ì— ë”°ë¥¸ ì§„í–‰ë¥  í…ìŠ¤íŠ¸ ìƒì„±
    const typeLabels = {
        'daily': 'ì˜¤ëŠ˜',
        'weekly': 'ì´ë²ˆ ì£¼',
        'monthly': 'ì´ë²ˆ ë‹¬'
    };
    
    // ëœë¤ ìƒ‰ìƒ ì„ íƒ (ë‹¤ì–‘ì„±ì„ ìœ„í•´)
    const colors = ['#EC9787', '#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#FF5722'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    
    // ìƒˆ ëª©í‘œ HTML ìƒì„±
    const newGoalHtml = `
        <div class="goal-item" data-goal-id="${goalIdCounter}" style="animation: slideInFromRight 0.3s ease;">
            <div class="goal-info">
                <div class="goal-title">${name}</div>
                <div class="goal-progress">${typeLabels[type]}: 0 / ${target}${unit}</div>
            </div>
            <div class="goal-actions">
                <div class="goal-status">
                    <div class="progress-ring">
                        <svg width="50" height="50">
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="5"/>
                            <circle cx="25" cy="25" r="20" fill="none" stroke="${randomColor}" stroke-width="5" 
                                    stroke-dasharray="125.6" stroke-dashoffset="125.6"/>
                        </svg>
                        <div class="progress-text" style="color: ${randomColor}">0%</div>
                    </div>
                </div>
                <button class="delete-btn" onclick="confirmDeleteGoal(${goalIdCounter}, '${name}')">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                </button>
            </div>
        </div>
    `;
    
    // ëª©í‘œ ì»¨í…Œì´ë„ˆ ì°¾ê¸°
    const goalsContainer = document.getElementById('goals-container');
    const addButton = document.querySelector('.add-goal-btn');
    
    // ìƒˆ ëª©í‘œë¥¼ ì¶”ê°€ ë²„íŠ¼ ë°”ë¡œ ì•ì— ì‚½ì…
    if (addButton) {
        addButton.insertAdjacentHTML('beforebegin', newGoalHtml);
    } else {
        // ì¶”ê°€ ë²„íŠ¼ì´ ì—†ëŠ” ê²½ìš° ì»¨í…Œì´ë„ˆ ëì— ì¶”ê°€
        goalsContainer.insertAdjacentHTML('beforeend', newGoalHtml);
    }
    
    // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì œê±° (í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡)
    setTimeout(() => {
        const newGoal = document.querySelector(`[data-goal-id="${goalIdCounter}"]`);
        if (newGoal) {
            newGoal.style.animation = '';
        }
    }, 300);
    
    goalIdCounter++;
    
    showSuccessMessage(`ìƒˆë¡œìš´ ëª©í‘œ "${name}"ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
    closeGoalModal();
    
    // ëª©í‘œ ê°œìˆ˜ ì—…ë°ì´íŠ¸ (ë””ë²„ê¹…ìš©)
    console.log(`í˜„ì¬ ëª©í‘œ ê°œìˆ˜: ${document.querySelectorAll('.goal-item').length}`);
}

// ì‹ë‹¨ ì €ì¥
function saveMeal() {
    const time = document.getElementById('mealTime').value;
    const menu = document.getElementById('mealMenu').value.trim();
    const calories = document.getElementById('mealCalories').value.trim();
    const note = document.getElementById('mealNote').value.trim();
    
    if (!menu || !calories) {
        alert('ë©”ë‰´ì™€ ì¹¼ë¡œë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    const timeLabels = {
        'breakfast': 'ì•„ì¹¨ ì‹ì‚¬',
        'lunch': 'ì ì‹¬ ì‹ì‚¬',
        'dinner': 'ì €ë… ì‹ì‚¬',
        'snack': 'ê°„ì‹'
    };
    
    const now = new Date();
    const timeString = now.toLocaleTimeString('ko-KR', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
    });
    
    // ìƒˆ ì‹ë‹¨ HTML ìƒì„±
    const newMealHtml = `
        <div class="meal-record" data-meal-id="${mealIdCounter}">
            <button class="meal-delete-btn" onclick="confirmDeleteMeal(${mealIdCounter}, '${timeLabels[time]}')">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
            </button>
            <div class="meal-header">
                <span class="meal-title">${timeLabels[time]}</span>
                <span class="meal-calories">${calories} kcal</span>
            </div>
            <div class="meal-items">${menu}</div>
            <div class="meal-time">${timeString}</div>
        </div>
    `;
    
    // í˜„ì¬ ì„ íƒëœ ì‹ì‚¬ ì‹œê°„ì˜ ê¸°ë¡ ì»¨í…Œì´ë„ˆì— ì¶”ê°€
    const recordsContainer = document.getElementById('meal-records');
    const addButton = recordsContainer.querySelector('.add-meal-btn');
    addButton.insertAdjacentHTML('beforebegin', newMealHtml);
    
    mealIdCounter++;
    
    showSuccessMessage('ì‹ë‹¨ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
    closeMealModal();
    
    // ì˜ì–‘ ì •ë³´ ì—…ë°ì´íŠ¸
    updateNutritionAfterAdd(parseInt(calories));
}

// ì‹ë‹¨ ì¶”ê°€ í›„ ì˜ì–‘ ì •ë³´ ì—…ë°ì´íŠ¸
function updateNutritionAfterAdd(addedCalories) {
    const calorieElement = document.querySelector('.nutrition-value');
    if (calorieElement) {
        const currentCalories = parseInt(calorieElement.textContent.replace(',', ''));
        const newCalories = currentCalories + addedCalories;
        calorieElement.textContent = newCalories.toLocaleString();
    }
}

// ë„¤ë¹„ê²Œì´ì…˜
function navigateTo(page) {
    // ì‹¤ì œ ì•±ì—ì„œëŠ” í˜ì´ì§€ ë¼ìš°íŒ… ì²˜ë¦¬
    switch(page) {
        case 'home':
            window.location.href = 'main.html';
            break;
        case 'health':
            // í˜„ì¬ í˜ì´ì§€
            break;
        case 'chatbot':
            showSuccessMessage('ì±—ë´‡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤');
            break;
        default:
            showSuccessMessage(`${page} í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤`);
    }
}

// ë’¤ë¡œê°€ê¸°
function goBack() {
    window.history.back();
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
document.addEventListener('click', function(event) {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        if (event.target === modal) {
            modal.classList.remove('show');
            if (modal.id === 'goalModal') clearGoalForm();
            if (modal.id === 'mealModal') clearMealForm();
        }
    });
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    // ë‹¬ì„±ë¥ ì´ ê¸°ë³¸ìœ¼ë¡œ í‘œì‹œë˜ë„ë¡ ì„¤ì •
    document.getElementById('calendarContainer').classList.add('hidden');
    document.getElementById('achievementContainer').classList.remove('hidden');
    
    // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜
    setTimeout(() => {
        const progressFill = document.querySelector('.progress-fill');
        if (progressFill) {
            progressFill.style.width = '0%';
            setTimeout(() => {
                progressFill.style.width = '87%';
            }, 100);
        }
    }, 100);
});
</script>
</body>
</html>